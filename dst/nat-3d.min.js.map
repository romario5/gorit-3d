{"version":3,"file":"nat-3d.min.js","sources":["../src/math/Matrix4.js","../src/utils/math.js","../src/math/Vector3.js","../src/core/IdGenerator.js","../src/core/FramesLoop.js","../src/meshes/Plane.js","../src/core/ObjectsContainer.js","../src/utils/EventsHub.js","../src/utils/Log.js","../src/math/Matrix.js","../src/math/Euler.js","../src/math/Quaternion.js","../src/core/Object3D.js","../src/math/Vertex.js","../src/core/Canvas.js","../src/core/constants.js","../src/core/Shader.js","../src/math/Color.js","../src/core/Material.js","../src/shaders/defaultVertex.js","../src/core/VertexShader.js","../src/shaders/defaultFragment.js","../src/core/FragmentShader.js","../src/materials/DefaultMaterial.js","../src/core/Mesh.js","../src/core/GeneratedMesh.js","../src/shaders/flatFragment.js","../src/materials/FlatMaterial.js","../src/meshes/CameraMesh.js","../src/meshes/DummyMesh.js","../src/meshes/Line.js","../src/core/Camera.js","../src/shaders/axisFragment.js","../src/materials/AxisMaterial.js","../src/meshes/LinedPlane.js","../src/meshes/AxisGuides.js","../src/core/Viewport.js","../src/core/Layer.js","../src/core/Scene.js","../src/file-parsers/FileParser.js","../src/file-parsers/ObjParser.js","../src/lights/Shadow.js","../src/lights/Light.js","../src/meshes/PointLightMesh.js","../src/index.js","../src/core/App.js","../src/meshes/Cube.js","../src/lights/PointLight.js"],"sourcesContent":["import Matrix from \"./Matrix\";\r\nimport Vector3 from \"./Vector3\";\r\n\r\nlet _up = new Vector3(0, 1, 0);\r\nlet zero = new Vector3( 0, 0, 0 );\r\nlet one = new Vector3( 1, 1, 1 );\r\n\r\nexport default class Matrix4 extends Matrix {\r\n    constructor(data) {\r\n        super(data);\r\n    }\r\n\r\n\r\n    clone() {\r\n        let data = [];\r\n        for (let i = 0; i <= this.data.length; i++) {\r\n            data[i] = this.data[i];\r\n        }\r\n        return new Matrix4(data);\r\n    }\r\n\r\n    /**\r\n     * Copies values from given matrix.\r\n     * @param {Matrix4} m \r\n     */\r\n    copyValuesFrom(m) {\r\n        for (let i = 0; i < 16; i++) {\r\n            this.data[i] = m.data[i];\r\n        }\r\n    }\r\n\r\n\r\n    multiply(m) {\r\n        let a = this.data;\r\n        let b = m.data;\r\n        var a00 = a[0 * 4 + 0];\r\n        var a01 = a[0 * 4 + 1];\r\n        var a02 = a[0 * 4 + 2];\r\n        var a03 = a[0 * 4 + 3];\r\n        var a10 = a[1 * 4 + 0];\r\n        var a11 = a[1 * 4 + 1];\r\n        var a12 = a[1 * 4 + 2];\r\n        var a13 = a[1 * 4 + 3];\r\n        var a20 = a[2 * 4 + 0];\r\n        var a21 = a[2 * 4 + 1];\r\n        var a22 = a[2 * 4 + 2];\r\n        var a23 = a[2 * 4 + 3];\r\n        var a30 = a[3 * 4 + 0];\r\n        var a31 = a[3 * 4 + 1];\r\n        var a32 = a[3 * 4 + 2];\r\n        var a33 = a[3 * 4 + 3];\r\n        var b00 = b[0 * 4 + 0];\r\n        var b01 = b[0 * 4 + 1];\r\n        var b02 = b[0 * 4 + 2];\r\n        var b03 = b[0 * 4 + 3];\r\n        var b10 = b[1 * 4 + 0];\r\n        var b11 = b[1 * 4 + 1];\r\n        var b12 = b[1 * 4 + 2];\r\n        var b13 = b[1 * 4 + 3];\r\n        var b20 = b[2 * 4 + 0];\r\n        var b21 = b[2 * 4 + 1];\r\n        var b22 = b[2 * 4 + 2];\r\n        var b23 = b[2 * 4 + 3];\r\n        var b30 = b[3 * 4 + 0];\r\n        var b31 = b[3 * 4 + 1];\r\n        var b32 = b[3 * 4 + 2];\r\n        var b33 = b[3 * 4 + 3];\r\n        this.data = [\r\n            b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,\r\n            b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,\r\n            b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,\r\n            b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,\r\n            b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,\r\n            b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,\r\n            b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,\r\n            b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,\r\n            b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,\r\n            b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,\r\n            b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,\r\n            b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,\r\n            b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,\r\n            b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,\r\n            b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,\r\n            b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33,\r\n        ];\r\n        return this;\r\n    }\r\n\r\n\r\n    inverse() {\r\n        let m = this.data;\r\n        var m00 = m[0 * 4 + 0];\r\n        var m01 = m[0 * 4 + 1];\r\n        var m02 = m[0 * 4 + 2];\r\n        var m03 = m[0 * 4 + 3];\r\n        var m10 = m[1 * 4 + 0];\r\n        var m11 = m[1 * 4 + 1];\r\n        var m12 = m[1 * 4 + 2];\r\n        var m13 = m[1 * 4 + 3];\r\n        var m20 = m[2 * 4 + 0];\r\n        var m21 = m[2 * 4 + 1];\r\n        var m22 = m[2 * 4 + 2];\r\n        var m23 = m[2 * 4 + 3];\r\n        var m30 = m[3 * 4 + 0];\r\n        var m31 = m[3 * 4 + 1];\r\n        var m32 = m[3 * 4 + 2];\r\n        var m33 = m[3 * 4 + 3];\r\n        var tmp_0  = m22 * m33;\r\n        var tmp_1  = m32 * m23;\r\n        var tmp_2  = m12 * m33;\r\n        var tmp_3  = m32 * m13;\r\n        var tmp_4  = m12 * m23;\r\n        var tmp_5  = m22 * m13;\r\n        var tmp_6  = m02 * m33;\r\n        var tmp_7  = m32 * m03;\r\n        var tmp_8  = m02 * m23;\r\n        var tmp_9  = m22 * m03;\r\n        var tmp_10 = m02 * m13;\r\n        var tmp_11 = m12 * m03;\r\n        var tmp_12 = m20 * m31;\r\n        var tmp_13 = m30 * m21;\r\n        var tmp_14 = m10 * m31;\r\n        var tmp_15 = m30 * m11;\r\n        var tmp_16 = m10 * m21;\r\n        var tmp_17 = m20 * m11;\r\n        var tmp_18 = m00 * m31;\r\n        var tmp_19 = m30 * m01;\r\n        var tmp_20 = m00 * m21;\r\n        var tmp_21 = m20 * m01;\r\n        var tmp_22 = m00 * m11;\r\n        var tmp_23 = m10 * m01;\r\n\r\n        var t0 = (tmp_0 * m11 + tmp_3 * m21 + tmp_4 * m31) -\r\n        (tmp_1 * m11 + tmp_2 * m21 + tmp_5 * m31);\r\n        var t1 = (tmp_1 * m01 + tmp_6 * m21 + tmp_9 * m31) -\r\n        (tmp_0 * m01 + tmp_7 * m21 + tmp_8 * m31);\r\n        var t2 = (tmp_2 * m01 + tmp_7 * m11 + tmp_10 * m31) -\r\n        (tmp_3 * m01 + tmp_6 * m11 + tmp_11 * m31);\r\n        var t3 = (tmp_5 * m01 + tmp_8 * m11 + tmp_11 * m21) -\r\n        (tmp_4 * m01 + tmp_9 * m11 + tmp_10 * m21);\r\n\r\n        var d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);\r\n\r\n        m[0] = d * t0;\r\n        m[1] = d * t1;\r\n        m[2] = d * t2;\r\n        m[3] = d * t3;\r\n        m[4] = d * ((tmp_1 * m10 + tmp_2 * m20 + tmp_5 * m30) -\r\n        (tmp_0 * m10 + tmp_3 * m20 + tmp_4 * m30));\r\n        m[5] = d * ((tmp_0 * m00 + tmp_7 * m20 + tmp_8 * m30) -\r\n        (tmp_1 * m00 + tmp_6 * m20 + tmp_9 * m30));\r\n        m[6] = d * ((tmp_3 * m00 + tmp_6 * m10 + tmp_11 * m30) -\r\n        (tmp_2 * m00 + tmp_7 * m10 + tmp_10 * m30));\r\n        m[7] = d * ((tmp_4 * m00 + tmp_9 * m10 + tmp_10 * m20) -\r\n        (tmp_5 * m00 + tmp_8 * m10 + tmp_11 * m20));\r\n        m[8] = d * ((tmp_12 * m13 + tmp_15 * m23 + tmp_16 * m33) -\r\n        (tmp_13 * m13 + tmp_14 * m23 + tmp_17 * m33));\r\n        m[9] = d * ((tmp_13 * m03 + tmp_18 * m23 + tmp_21 * m33) -\r\n        (tmp_12 * m03 + tmp_19 * m23 + tmp_20 * m33));\r\n        m[10] = d * ((tmp_14 * m03 + tmp_19 * m13 + tmp_22 * m33) -\r\n        (tmp_15 * m03 + tmp_18 * m13 + tmp_23 * m33));\r\n        m[11] = d * ((tmp_17 * m03 + tmp_20 * m13 + tmp_23 * m23) -\r\n        (tmp_16 * m03 + tmp_21 * m13 + tmp_22 * m23));\r\n        m[12] = d * ((tmp_14 * m22 + tmp_17 * m32 + tmp_13 * m12) -\r\n        (tmp_16 * m32 + tmp_12 * m12 + tmp_15 * m22));\r\n        m[13] = d * ((tmp_20 * m32 + tmp_12 * m02 + tmp_19 * m22) -\r\n        (tmp_18 * m22 + tmp_21 * m32 + tmp_13 * m02));\r\n        m[14] = d * ((tmp_18 * m12 + tmp_23 * m32 + tmp_15 * m02) -\r\n        (tmp_22 * m32 + tmp_14 * m02 + tmp_19 * m12));\r\n        m[15] = d * ((tmp_22 * m22 + tmp_16 * m02 + tmp_21 * m12) -\r\n        (tmp_20 * m12 + tmp_23 * m22 + tmp_17 * m02));\r\n\r\n        return this;\r\n    }\r\n\r\n    compose(position, quaternion, scale) {\r\n\t\tlet te = this.data;\r\n\r\n\t\tlet x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\r\n\t\tlet x2 = x + x,\ty2 = y + y, z2 = z + z;\r\n\t\tlet xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tlet yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tlet wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tlet sx = scale.x, sy = scale.y, sz = scale.z;\r\n\r\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\r\n\t\tte[ 1 ] = ( xy + wz ) * sx;\r\n\t\tte[ 2 ] = ( xz - wy ) * sx;\r\n\t\tte[ 3 ] = 0;\r\n\r\n\t\tte[ 4 ] = ( xy - wz ) * sy;\r\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\r\n\t\tte[ 6 ] = ( yz + wx ) * sy;\r\n\t\tte[ 7 ] = 0;\r\n\r\n\t\tte[ 8 ] = ( xz + wy ) * sz;\r\n\t\tte[ 9 ] = ( yz - wx ) * sz;\r\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\tte[ 12 ] = position.x;\r\n\t\tte[ 13 ] = position.y;\r\n\t\tte[ 14 ] = position.z;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\t}\r\n}\r\n\r\n/**\r\n * \r\n */\r\nMatrix4.createTranslation = function(dx, dy, dz) {\r\n    if (dx.isVector3) {\r\n        dy = dx._y;\r\n        dz = dx._z;\r\n        dx = dx._x;\r\n    }\r\n    return new Matrix4([\r\n        1,  0,  0,  0,\r\n        0,  1,  0,  0,\r\n        0,  0,  1,  0,\r\n        dx, dy, dz, 1\r\n    ]);\r\n};\r\n\r\n\r\nMatrix4.createXRotation = function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return new Matrix4([\r\n        1, 0, 0, 0,\r\n        0, c, s, 0,\r\n        0, -s, c, 0,\r\n        0, 0, 0, 1\r\n    ]);\r\n};\r\n\r\n\r\nMatrix4.createYRotation = function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return new Matrix4([\r\n        c, 0, -s, 0,\r\n        0, 1, 0, 0,\r\n        s, 0, c, 0,\r\n        0, 0, 0, 1\r\n    ]);\r\n};\r\n\r\n\r\nMatrix4.createZRotation = function(angleInRadians) {\r\n    var c = Math.cos(angleInRadians);\r\n    var s = Math.sin(angleInRadians);\r\n\r\n    return new Matrix4([\r\n        c, s, 0, 0,\r\n        -s, c, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1\r\n    ]);\r\n};\r\n\r\n\r\nMatrix4.createScaling = function(sx, sy, sz) {\r\n    return new Matrix4([\r\n        sx, 0,  0,  0,\r\n        0, sy,  0,  0,\r\n        0,  0, sz,  0,\r\n        0,  0,  0,  1\r\n    ]);\r\n};\r\n\r\n\r\nMatrix4.createProjection = function(width, height, depth) {\r\n    return new Matrix4([\r\n        2 / width, 0, 0, 0,\r\n        0, -2 / height, 0, 0,\r\n        0, 0, 2 / depth, 0,\r\n        -1, 1, 0, 1\r\n    ]);\r\n};\r\n\r\n\r\nMatrix4.createPerspective = function(FOVInRadians, near, far, aspect) {\r\n    let m = [];\r\n    var f = Math.tan(Math.PI * 0.5 - 0.5 * FOVInRadians);\r\n    var rangeInv = 1.0 / (near - far);\r\n\r\n    m[ 0] = f / aspect;\r\n    m[ 1] = 0;\r\n    m[ 2] = 0;\r\n    m[ 3] = 0;\r\n    m[ 4] = 0;\r\n    m[ 5] = f;\r\n    m[ 6] = 0;\r\n    m[ 7] = 0;\r\n    m[ 8] = 0;\r\n    m[ 9] = 0;\r\n    m[10] = (near + far) * rangeInv;\r\n    m[11] = -1;\r\n    m[12] = 0;\r\n    m[13] = 0;\r\n    m[14] = near * far * rangeInv * 2;\r\n    m[15] = 0;\r\n\r\n    return new Matrix4(m);\r\n};\r\n\r\n\r\n\r\nMatrix4.lookAt = function(direction, up) {\r\n    // If local UP vector is not given - use global UP vector.\r\n    if (up === undefined) up = _up;\r\n    \r\n    var zAxis = direction.clone();\r\n\r\n    if (zAxis.squaredMagnitude() === 0) {\r\n        console.log('change direction');\r\n        zAxis.z = 1;\r\n    }\r\n\r\n    zAxis.normalize();\r\n\r\n    var xAxis = up.clone().cross(zAxis);\r\n\r\n    // If UP and Z are parallel.\r\n    if (xAxis.squaredMagnitude() === 0) {\r\n        if (Math.abs(up.z) === 1) {\r\n            zAxis.x += 0.0001;\r\n        } else {\r\n            zAxis.z += 0.0001;\r\n        }\r\n\r\n        zAxis.normalize();\r\n        xAxis= zAxis.clone().cross(up);\r\n    }\r\n    xAxis.normalize();\r\n\r\n    let yAxis = zAxis.clone().cross(xAxis);\r\n\r\n    return new Matrix4([\r\n        xAxis.x, xAxis.y, xAxis.z, 0,\r\n        yAxis.x, yAxis.y, yAxis.z, 0,\r\n        zAxis.x, zAxis.y, zAxis.z, 0,\r\n        0,\r\n        0,\r\n        0,\r\n        1,\r\n    ]);\r\n};\r\n\r\nMatrix4.createRotationAxis = function(axis, angle) {\r\n    let c = Math.cos( angle ),\r\n        s = Math.sin( angle ),\r\n        t = 1 - c,\r\n        x = axis.x, \r\n        y = axis.y, \r\n        z = axis.z,\r\n        tx = t * x, \r\n        ty = t * y;\r\n\r\n    let matrix = new Matrix4();\r\n\r\n    matrix.data = [\r\n        tx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n        tx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n        tx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n        0, 0, 0, 1\r\n    ];\r\n\r\n    return matrix;\r\n},\r\n\r\n\r\n\r\nMatrix4.createFromQuaternion = function(q) {\r\n    let m = new Matrix4();\r\n\treturn m.compose(zero, q, one);\r\n}","var _lut = [];\r\n\r\nfor ( var i = 0; i < 256; i ++ ) {\r\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\r\n}\r\n\r\nlet DEG2RAD = Math.PI / 180;\r\nlet RAD2DEG = 180 / Math.PI;\r\n\r\nexport function generateUUID() {\r\n    var d0 = Math.random() * 0xffffffff | 0;\r\n    var d1 = Math.random() * 0xffffffff | 0;\r\n    var d2 = Math.random() * 0xffffffff | 0;\r\n    var d3 = Math.random() * 0xffffffff | 0;\r\n    var uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\r\n        _lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\r\n        _lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\r\n        _lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\r\n\r\n    return uuid.toUpperCase();\r\n}\r\n\r\nexport function clamp(value, min, max) {\r\n    return Math.max(min, Math.min(max, value));\r\n}\r\n\r\n// Compute euclidian modulo of m % n\r\n// https://en.wikipedia.org/wiki/Modulo_operation\r\nexport function euclideanModulo(n, m) {\r\n    return (( n % m ) + m) % m;\r\n}\r\n\r\n// Linear mapping from range <a1, a2> to range <b1, b2>\r\nexport function mapLinear(x, a1, a2, b1, b2) {\r\n    return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n}\r\n\r\n// https://en.wikipedia.org/wiki/Linear_interpolation\r\nexport function lerp(x, y, t) {\r\n    return (1 - t) * x + t * y;\r\n}\r\n\r\n// http://en.wikipedia.org/wiki/Smoothstep\r\nexport function smoothstep(x, min, max) {\r\n    if (x <= min) return 0;\r\n    if (x >= max) return 1;\r\n    x = (x - min) / (max - min);\r\n    return x * x * (3 - 2 * x);\r\n}\r\n\r\nexport function smootherstep(x, min, max) {\r\n    if ( x <= min ) return 0;\r\n    if ( x >= max ) return 1;\r\n    x = ( x - min ) / ( max - min );\r\n    return x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n}\r\n\r\n// Random integer from <low, high> interval\r\nexport function randInt(low, high) {\r\n    return low + Math.floor(Math.random() * ( high - low + 1 ));\r\n}\r\n\r\n// Random float from <low, high> interval\r\nexport function randFloat(low, high) {\r\n    return low + Math.random() * (high - low);\r\n}\r\n\r\n// Random float from <-range/2, range/2> interval\r\nexport function randFloatSpread(range) {\r\n    return range * (0.5 - Math.random());\r\n}\r\n\r\nexport function degToRad(degrees) {\r\n    return degrees * DEG2RAD;\r\n}\r\n\r\nexport function radToDeg(radians) {\r\n    return radians * RAD2DEG;\r\n}\r\n\r\nexport function isPowerOfTwo(value) {\r\n    return (value & (value - 1 )) === 0 && value !== 0;\r\n}\r\n\r\nexport function ceilPowerOfTwo(value) {\r\n    return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));\r\n}\r\n\r\nexport function floorPowerOfTwo(value) {\r\n    return Math.pow(2, Math.floor( Math.log( value ) / Math.LN2 ));\r\n}\r\n\r\n","import EventsHub from \"../utils/EventsHub\";\r\n\r\nexport default class Vector3 \r\n{\r\n    constructor(x, y, z) {\r\n        this._x = x || 0;\r\n        this._y = y || 0;\r\n        this._z = z || 0;\r\n\r\n        this._eventsHub = new EventsHub();\r\n    }\r\n\r\n    /**\r\n     * Adds change event listener.\r\n     * \r\n     * @param {function} handler \r\n     * @param {number|string} channel Unique name of a handler.\r\n     * @see EventsHub\r\n     */\r\n    onChange(handler, channel) {\r\n        if (channel === undefined) {\r\n            this._eventsHub.on('change', handler);\r\n        } else {\r\n            this._eventsHub.getChannel(channel).on('change', handler);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets all three values and the fires change event.\r\n     * Use this method to prevent unnecessary events firing.\r\n     * \r\n     * @param {number} x \r\n     * @param {number} y \r\n     * @param {number} z \r\n     * @return {Vector3}\r\n     */\r\n    setValues(x, y, z) {\r\n        this._x = x;\r\n        this._y = y;\r\n        this._z = z;\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Copies values from another vector or quaternion.\r\n     * \r\n     * @param {Vector3|Quaternion} vector\r\n     * @return {Vector3} Returns itself for chaining.\r\n     * @fires change\r\n     */\r\n    copyValuesFrom(vector) {\r\n        this._x = vector.x;\r\n        this._y = vector.y;\r\n        this._z = vector.z;\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Returns length of the vector.\r\n     * \r\n     * @return {number}\r\n     */\r\n    magnitude() {\r\n        return Math.sqrt(this._x*this._x + this._y*this._y + this._z*this._z);\r\n    }\r\n\r\n    /**\r\n     * Returns squared magnitude (same magnitude without square root).\r\n     * \r\n     * @return {number}\r\n     */\r\n    squaredMagnitude() {\r\n        return this._x*this._x + this._y*this._y + this._z*this._z;\r\n    }\r\n\r\n    /**\r\n     * Normalizes vector (makes length 1).\r\n     * \r\n     * @return {Vector3} Returns itself for chaining.\r\n     * @fires change\r\n     */\r\n    normalize() {\r\n        let len = this.magnitude();\r\n        this._x /= len;\r\n        this._y /= len;\r\n        this._z /= len;\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiplies each component on the given value.\r\n     * \r\n     * @param {number} value\r\n     * @return {Vector3} Returns itself for chaining.\r\n     * @fires change\r\n     */\r\n    multiply(value) {\r\n        this._x *= value;\r\n        this._y *= value;\r\n        this._z *= value;\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Makes cross of current vector with given one.\r\n     * \r\n     * @param {Vector3} v\r\n     * @return {Vector3} Returns itself for chaining.\r\n     * @fires change\r\n     */\r\n    cross(v) {\r\n        let n = this.clone();\r\n        this._x = n.y * v.z - n.z * v.y;\r\n        this._y = n.z * v.x - n.x * v.z;\r\n        this._z = n.x * v.y - n.y * v.x;\r\n\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Returns dot product of this vector with another one.\r\n     * \r\n     * @param {Vector3} v \r\n     * @return {number}\r\n     */\r\n    dot(v) {\r\n        return this._x * v.x + this._y * v.y + this._z + v.z;\r\n    }\r\n\r\n    /**\r\n     * Adds given value to each vector component.\r\n     * \r\n     * @param {number} value \r\n     * @return {number|Vector3|Quaternion} Returns itself for chaining.\r\n     * @fires change\r\n     */\r\n    add(value) {\r\n        if (typeof value === 'object') {\r\n            this._x += value.x;\r\n            this._y += value.y;\r\n            this._z += value.z;\r\n        } else {\r\n            this._x += value;\r\n            this._y += value;\r\n            this._z += value;\r\n        }\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Subtracts given value from each vector component.\r\n     * \r\n     * @param {number} value \r\n     * @return {number|Vector3|Quaternion} Returns itself for chaining.\r\n     * @fires change\r\n     */\r\n    sub(value) {\r\n        if (typeof value === 'object') {\r\n            this._x -= value.x;\r\n            this._y -= value.y;\r\n            this._z -= value.z;\r\n        } else {\r\n            this._x -= value;\r\n            this._y -= value;\r\n            this._z -= value;\r\n        }\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Inverts vector.\r\n     * \r\n     * @return {Vector3} \r\n     */\r\n    invert() {\r\n        this._x = -this._x\r\n        this._y = -this._y\r\n        this._z = -this._z\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clones vector and returns new copy.\r\n     * \r\n     * @return {Vector3}\r\n     */\r\n    clone() {\r\n        return new Vector3(this._x, this._y, this._z);\r\n    }\r\n\r\n    /**\r\n     * Applies quaternion rotation to the vector.\r\n     * \r\n     * @param {Quaternion} q\r\n     * @return {Vector3} Returns itself for chaining.\r\n     * @fires change\r\n     */\r\n    applyQuaternion(q) {\r\n\t\tlet x = this.x, y = this.y, z = this.z;\r\n\t\tlet qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n\t\t// Calculate Quaternion * Vector3.\r\n\t\tlet ix = qw * x + qy * z - qz * y;\r\n\t\tlet iy = qw * y + qz * x - qx * z;\r\n\t\tlet iz = qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// Calculate result * inverse Quaternion.\r\n\t\tthis._x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis._y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis._z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n        this._eventsHub.trigger('change', this, this);\r\n\t\treturn this;\r\n\t}\r\n\r\n    /**\r\n     * Returns array with all components.\r\n     * \r\n     * @return {Array}\r\n     */\r\n    toArray() {\r\n        return [this._x, this._y, this._z];\r\n    }\r\n}\r\n\r\n\r\nVector3.prototype.isVector3 = true;\r\n\r\n\r\nObject.defineProperty(Vector3.prototype, 'x', {\r\n    get() {return this._x},\r\n    set(value) {\r\n        this._x = value;\r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});\r\n\r\n\r\nObject.defineProperty(Vector3.prototype, 'y', {\r\n    get() {return this._y},\r\n    set(value) {\r\n        this._y = value;\r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});\r\n\r\n\r\nObject.defineProperty(Vector3.prototype, 'z', {\r\n    get() {return this._z},\r\n    set(value) {\r\n        this._z = value;\r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});","let idCounter = 1;\r\n\r\n\r\nexport default function() {\r\n    return idCounter++;\r\n}","let handlers = [];\r\nlet namedHandlers = {};\r\n\r\nlet lastFrameTime = performance.now();\r\nlet deltaTime = 1;\r\n\r\nlet lastSecondTime = lastFrameTime;\r\nlet framesRendered = 0;\r\n\r\nlet fps = 0;\r\n\r\n// Run all handlers in the loop.\r\nfunction loop() {\r\n    let now = performance.now();\r\n    let deltaTime = now - lastFrameTime;\r\n    lastFrameTime = now;\r\n\r\n    for (let i = 0; i < handlers.length; i++) {\r\n        handlers[i](deltaTime);\r\n    }\r\n\r\n    for (let p in namedHandlers) {\r\n        if (namedHandlers.hasOwnProperty(p)) {\r\n            namedHandlers[p](deltaTime);\r\n        }\r\n    }\r\n\r\n    framesRendered++;\r\n\r\n    if (now - lastSecondTime >= 1000) {\r\n        lastSecondTime = now;\r\n        fps = framesRendered;\r\n        framesRendered = 0;\r\n    }\r\n\r\n    requestAnimationFrame(loop);\r\n}\r\n\r\n\r\nexport default class FramesLoop\r\n{\r\n    constructor(handler, name) {\r\n        this.name = name;\r\n        this.handler = handler;\r\n        this.start();\r\n    }\r\n\r\n\r\n    stop() {\r\n        if (name === undefined) {\r\n            for (let i = 0; i < handlers; i++) {\r\n                if (handlers[i] === this.handler) {\r\n                    handlers.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            delete namedHandlers[this.name];\r\n        }\r\n    }\r\n\r\n\r\n    start() {\r\n        if (this.name === undefined) {\r\n            handlers.push(this.handler);\r\n        } else {\r\n            namedHandlers[this.name] = this.handler;\r\n        }\r\n    }\r\n\r\n    getFPS() {\r\n        return fps;\r\n    }\r\n}\r\n\r\n\r\nFramesLoop.getFPS = function() {\r\n    return fps;\r\n};\r\n\r\n\r\nloop();\r\n","import GeneratedMesh from \"../core/GeneratedMesh\";\r\n\r\nexport default class Plane extends GeneratedMesh\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n    }\r\n\r\n\r\n    applyParameters(params) {\r\n        this.width  = params.width || 200;\r\n        this.height = params.height || 200;\r\n        this.edgesX = params.edgesX || 1;\r\n        this.edgesY = params.edgesY || 1;\r\n    }\r\n\r\n\r\n    generateMesh() {\r\n        let vertices = [];\r\n        let polygons = [];\r\n        let indices = [];\r\n        let normals = [];\r\n\r\n        let stepX = this.width / this.edgesX;\r\n        let stepY = this.height / this.edgesY;\r\n\r\n        let k = 0;\r\n        let inverse = false;\r\n        for (let xi = 0; xi < this.edgesX + 1; xi++) {\r\n            for (let yi = 0; yi < this.edgesY + 1; yi++) {\r\n\r\n                let y2i = inverse ? this.edgesY - yi : yi;\r\n                let x = -this.width/2 + (stepX * xi);\r\n                let y = -this.height/2 + (stepY * y2i);\r\n\r\n                let d = createPolygon(x, y, stepX, stepY, k);\r\n                k += 4;\r\n\r\n                vertices.push(...d.vertices);\r\n                polygons.push(d.polygon);\r\n                indices.push(...d.indices);\r\n                normals.push(...d.normals);\r\n            }\r\n            inverse = !inverse;\r\n        }\r\n\r\n        this.vertices = vertices;\r\n        this.polygons = polygons;\r\n        this.facesIndices = indices;\r\n        this.normals = normals;\r\n    }\r\n}\r\n\r\n\r\nfunction createPolygon(x, y, width, height, k) {\r\n    return {\r\n        vertices: [\r\n            x, 0, y,\r\n            x + width, 0, y,\r\n            x + width, 0, y + height,\r\n            x, 0, y + height\r\n        ],\r\n        indices: [k+0, k+1, k+3, k+2, k+3, k+1],\r\n        polygon: [k+0, k+1, k+2, k+3],\r\n        normals: [\r\n            0, 0, 1,\r\n            0, 0, 1,\r\n            0, 0, 1,\r\n            0, 0, 1\r\n        ],\r\n        textCoords: [0, 1]\r\n    };\r\n}\r\n","import getNextId from \"./IdGenerator\";\r\n\r\nexport default class ObjectsContainer {\r\n    constructor (name) {\r\n        this.id = getNextId();\r\n        this.name = name;\r\n        this.objects = {};\r\n        this.seeThrough = false;\r\n    }\r\n\r\n    /**\r\n     * Adds object to the container.\r\n     * \r\n     * @param {Object3D}\r\n     */\r\n    addObject(obj) {\r\n        this.objects[obj.id] = obj;\r\n    }\r\n\r\n    /**\r\n     * Removes given objects.\r\n     * \r\n     * @param {Object3D} obj \r\n     */\r\n    removeObject(obj) {\r\n        delete this.objects[obj.id];\r\n    }\r\n}\r\n","export default class EventsHub\r\n{\r\n    constructor() {\r\n        this.handlers = {};\r\n        this.namedHandlers = {};\r\n    }\r\n\r\n\r\n    getChannel(name) {\r\n        return {\r\n            on: (eventName, handler) => {\r\n                if (!this.namedHandlers.hasOwnProperty(name)) {\r\n                    this.namedHandlers[name] = {};\r\n                }\r\n                this.namedHandlers[name][eventName] = handler;\r\n            }\r\n        };\r\n    }\r\n\r\n    on(eventName, handler) {\r\n        if (!this.handlers.hasOwnProperty(eventName)) {\r\n            this.handlers[eventName] = [];\r\n        }\r\n        this.handlers[eventName].push(handler);\r\n    }\r\n\r\n    trigger(eventName, context,  ...args) {\r\n        if (this.handlers.hasOwnProperty(eventName)) {\r\n            for (let i = 0; i < this.handlers[eventName].length; i++) {\r\n                this.handlers[eventName][i].call(context, ...args);\r\n            }\r\n        }\r\n        if (this.handlers.hasOwnProperty(eventName)) {\r\n            for (let h in this.namedHandlers[eventName]) {\r\n                this.namedHandlers[eventName][h].call(context, ...args);\r\n            }\r\n        }\r\n    }\r\n}","class Log\r\n{\r\n    constructor(prefix) {\r\n        this.prefix = prefix || 'Gorit3D: ';\r\n    }\r\n\r\n    error(msg) {\r\n        console.log(this.prefix + msg);\r\n    }\r\n\r\n    info(msg) {\r\n        console.log(this.prefix + msg);\r\n    }\r\n\r\n    warn(msg) {\r\n        console.warn(this.prefix + msg);\r\n    }\r\n}\r\n\r\n\r\n\r\nvar log = new Log();\r\nexport default log;\r\n","export default class Matrix {\r\n    constructor(data) {\r\n        this.data = Array.isArray(data) ? data : [];\r\n    }\r\n}\r\n","import EventsHub from \"../utils/EventsHub\";\r\nimport Vector3 from \"./Vector3\";\r\nimport {clamp} from \"../utils/math\";\r\nimport Log from \"../utils/Log\";\r\nimport Matrix4 from \"./Matrix4\";\r\nimport {radToDeg} from \"../utils/math\";\r\n\r\nexport default class Euler extends Vector3\r\n{\r\n    constructor(x, y, z, order) {\r\n        super(x, y, z);\r\n        this._order = order === undefined ? 'XYZ' : order.toUpperCase();\r\n        this._eventsHub = new EventsHub();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Returns euler angles in degrees.\r\n\t * \r\n\t * @return {Euler}\r\n\t */\r\n\tinDegrees() {\r\n\t\treturn new Euler(radToDeg(this.x), radToDeg(this.y), radToDeg(this.z), this.order);\r\n\t}\r\n\r\n    copyValuesFrom(v) {\r\n        this._x = vector.x;\r\n        this._y = vector.y;\r\n        this._z = vector.z;\r\n        if (v.order !== undefined) {\r\n            this._order = vector.order;\r\n        }\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    setFromRotationMatrix(m, order, update) {\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\tvar te = m.data;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\t\t\tthis._y = Math.asin( clamp(m13, -1, 1));\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tLog.warn( 'Euler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this._eventsHub.trigger('change', this, this);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetFromQuaternion(q, order, update) {\r\n\t\tlet matrix = Matrix4.createFromQuaternion(q);\r\n\t\treturn this.setFromRotationMatrix(matrix, order, update);\r\n    }\r\n    \r\n    reorder(newOrder) {\r\n        // WARNING: this discards revolution information\r\n        //let _quaternion = new Quaternion();\r\n\t\t//_quaternion.setFromEuler(this);\r\n\t\t//return this.setFromQuaternion( _quaternion, newOrder );\r\n\t}\r\n}\r\n\r\n\r\nEuler.prototype.isEuler = true;\r\n\r\nObject.defineProperty(Euler.prototype, 'order', {\r\n    get() {\r\n        return this._order;\r\n    },\r\n    set(value) {\r\n        this._order = value.toUpperCase();\r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});","import EventsHub from \"../utils/EventsHub\";\r\nimport Log from \"../utils/Log\";\r\nimport Euler from \"./Euler\";\r\n\r\nexport default class Quaternion\r\n{\r\n    constructor(x, y, z, w) {\r\n        this._x = x === undefined ? 0 : x;\r\n        this._y = y === undefined ? 0 : y;\r\n        this._z = z === undefined ? 0 : z;\r\n        this._w = w === undefined ? 1 : w;\r\n\r\n        this._eventsHub = new EventsHub();\r\n\t}\r\n\t\r\n\t/**\r\n     * Adds change event listener.\r\n     * \r\n     * @param {function} handler \r\n     * @param {number|string} channel Unique name of a handler.\r\n     * @see EventsHub\r\n     */\r\n    onChange(handler, channel) {\r\n        if (channel === undefined) {\r\n            this._eventsHub.on('change', handler);\r\n        } else {\r\n            this._eventsHub.getChannel(channel).on('change', handler);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets all three values and the fires change event.\r\n     * Use this method to prevent unnecessary events firing.\r\n     * \r\n     * @param {number} x \r\n     * @param {number} y \r\n     * @param {number} z \r\n     * @param {number} w\r\n     * @return {Quaternion}\r\n     */\r\n    setValues(x, y, z, w) {\r\n        this._x = x || this._x;\r\n        this._y = y || this._y;\r\n        this._z = z || this._z;\r\n        this._w = w || this._w;\r\n        this._eventsHub.trigger('change', this, this);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Copies all values from given vector or quaternion.\r\n     * Use this method to prevent unnecessary change event firing.\r\n     * \r\n     * @param {Vector|Quaternion} v \r\n     */\r\n    copyValuesFrom(v) {\r\n        this._x = v.x;\r\n        this._y = v.y;\r\n        this._z = v.z;\r\n        if (v.w !== undefined) {\r\n            this._w = v.w;\r\n        }\r\n        this._eventsHub.trigger('change', this, this);\r\n    }\r\n\r\n    /**\r\n     * Sets values from euler components.\r\n     * \r\n     * @param {Euler|Vector3} euler \r\n     * @param {boolean} fireEvents\r\n     * @return {Quaternion} Returns itself for chaining.\r\n     */\r\n    setFromEuler(euler, fireEvents) {\r\n\t\tif (!euler.isEuler && !euler.isVector3) {\r\n            Log.error('Quaternion: argument given in .setFromEuler() is not an Euler or Vector3.');\r\n        }\r\n\r\n        let x     = euler._x, \r\n            y     = euler._y, \r\n            z     = euler._z, \r\n            order = euler.isEuler ? euler.order : 'XYZ'; // Use XYZ order by default for vectors.\r\n\r\n\t\tlet cos = Math.cos;\r\n\t\tlet sin = Math.sin;\r\n\r\n\t\tlet c1 = cos( x / 2 );\r\n\t\tlet c2 = cos( y / 2 );\r\n\t\tlet c3 = cos( z / 2 );\r\n\r\n\t\tlet s1 = sin( x / 2 );\r\n\t\tlet s2 = sin( y / 2 );\r\n\t\tlet s3 = sin( z / 2 );\r\n\r\n\t\tif (order === 'XYZ') {\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if (order === 'YXZ') {\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if (order === 'ZXY') {\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if (order === 'ZYX') {\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if (order === 'YZX') {\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if (order === 'XZY') {\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\t}\r\n\r\n\t\tif (fireEvents !== false) this._eventsHub.trigger('change', this, this);\r\n\t\treturn this;\r\n    }\r\n    \r\n    /**\r\n     * Set values from vector and rotation angle.\r\n     * Ensure that vector is normalized.\r\n     * \r\n     * @param {Vector3} axis \r\n     * @param {number} angle \r\n     * @return {Quaternion} Returns itself for chaining.\r\n     */\r\n    setFromAxisAngle(axis, angle) {\r\n        let halfAngle = angle / 2, \r\n            s = Math.sin(halfAngle);\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos(halfAngle);\r\n\t\tthis._eventsHub.trigger('change', this, this);\r\n\t\treturn this;\r\n    }\r\n    \r\n    /**\r\n     * Sets components from given matrix.\r\n     * \r\n     * @param {Matrix3x3|Matrix4} m\r\n     * @return {Quaternion} Returns itself for chaining.\r\n     */\r\n    setFromRotationMatrix(m) {\r\n    \tlet te  = m.data,\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\t\t}\r\n\r\n\t\tthis._eventsHub.trigger('change', this, this);\r\n\t\treturn this;\r\n    }\r\n    \r\n    /**\r\n     * Sets value from angle between two vectors.\r\n     * Ensure that both vectors are normalized.\r\n     * Normalizes after setting components.\r\n     * \r\n     * @param {Vector3} from \r\n     * @param {Vector3} to\r\n     * @return {Quaternion} Returns itself for chaining.\r\n     */\r\n    setFromUnitVectors(from, to) {\r\n\t\tlet EPS = 0.000001;\r\n\t\tlet r = from.dot(to) + 1;\r\n\r\n\t\tif (r < EPS) {\r\n\t\t\tif (Math.abs(from.x) > Math.abs(from.z)) {\r\n\t\t\t\tthis._x = - from.y;\r\n\t\t\t\tthis._y = from.x;\r\n\t\t\t\tthis._z = 0;\r\n\t\t\t\tthis._w = 0;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = - from.z;\r\n\t\t\t\tthis._z = from.y;\r\n\t\t\t\tthis._w = 0;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._x = from.y * to.z - from.z * to.y;\r\n\t\t\tthis._y = from.z * to.x - from.x * to.z;\r\n\t\t\tthis._z = from.x * to.y - from.y * to.x;\r\n\t\t\tthis._w = r;\r\n\t\t}\r\n\t\treturn this.normalize();\r\n    }\r\n    \r\n    /**\r\n     * Returns length of the quaternion.\r\n     * \r\n     * @return {number}\r\n     */\r\n    magnitude() {\r\n\t\treturn Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);\r\n\t}\r\n\r\n    /**\r\n     * Normalizes quaternion changing components to change length to 1 keeping direction.\r\n     * \r\n     * @return {Quaternion} Returns itself for chaining.\r\n     */\r\n    normalize() {\r\n\t\tlet len = this.magnitude();\r\n\r\n\t\tif ( len === 0 ) {\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\t\t} else {\r\n\t\t\tlen = 1 / len;\r\n\t\t\tthis._x = this._x * len;\r\n\t\t\tthis._y = this._y * len;\r\n\t\t\tthis._z = this._z * len;\r\n\t\t\tthis._w = this._w * len;\r\n\t\t}\r\n\t\tthis._eventsHub.trigger('change', this, this);\r\n\t\treturn this;\r\n    }\r\n    \r\n    multiply(q) {\r\n\t\tvar qax = this._x, qay = this._y, qaz = this._z, qaw = this._w;\r\n\t\tvar qbx = q._x, qby = q._y, qbz = q._z, qbw = q._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis._eventsHub.trigger('change', this, this);\r\n\t\treturn this;\r\n\t}\r\n}\r\n\r\n\r\nQuaternion.prototype.isQuaternion = true;\r\n\r\n// Add magic properties.\r\nObject.defineProperty(Quaternion.prototype, 'x', {\r\n    get() {return this._x;},\r\n    set(value) {\r\n        this._x = value; \r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});\r\n\r\nObject.defineProperty(Quaternion.prototype, 'y', {\r\n    get() {return this._y;},\r\n    set(value) {\r\n        this._y = value; \r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});\r\n\r\nObject.defineProperty(Quaternion.prototype, 'z', {\r\n    get() {return this._z;},\r\n    set(value) {\r\n        this._z = value; \r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});\r\n\r\nObject.defineProperty(Quaternion.prototype, 'w', {\r\n    get() {return this._w;},\r\n    set(value) {\r\n        this._w = value; \r\n        this._eventsHub.trigger('change', this, this);\r\n    },\r\n    enumerable: true\r\n});","import getNextId from \"./IdGenerator\";\r\nimport Vector3 from \"../math/Vector3\";\r\nimport Quaternion from \"../math/Quaternion\";\r\nimport Matrix4 from \"../math/Matrix4\";\r\nimport ObjectsContainer from \"./ObjectsContainer\";\r\nimport Euler from \"../math/Euler\";\r\n\r\n/**\r\n * Represents single 3D object.\r\n * Each 3d object has position, rotation and scale.\r\n * Also it can be rendered.\r\n */\r\nexport default class Object3D {\r\n    constructor(name) {\r\n        this.id = getNextId();\r\n        this.name = name || '';\r\n\r\n        // All meshes of the object.\r\n        this.meshes = {};\r\n\r\n        // Transform of the object.\r\n        this.position = new Vector3();\r\n        this.rotation = new Euler();\r\n        this.scale = new Vector3();\r\n\r\n        // Internal quaternion that stores orientation in the space.\r\n        // All rotation changes are applied to the quaternion first and after that \r\n        // the euler angles are updated from this quaternion.\r\n        this._rotationQ = new Quaternion();\r\n\r\n        // Update internal quaternion when euler angles are changed.\r\n        this.rotation.onChange(e => {\r\n            this._rotationQ.setFromEuler(e, false);\r\n        });\r\n\r\n        // Update euler angles when quaternion is changed.\r\n        this._rotationQ.onChange(q => {\r\n            this.rotation.setFromQuaternion(q);\r\n        });\r\n\r\n        // Constraints that are applied to the object (such as LookAt or IK).\r\n        this.constraints = [];\r\n\r\n        // Container for helpers (other 3d objects that will not be rendered in production).\r\n        // All helpers are not transformed by object's transform.\r\n        // So if you use some helpers implement it own transform manipulation separately.\r\n        // For example for camera the mesh position bound to the camera position.\r\n        this.helpers = new ObjectsContainer();\r\n\r\n        // Helpers that are available for displaying in the hierarchy tree.\r\n        this.visibleHelpers = new ObjectsContainer();\r\n    }\r\n\r\n    /**\r\n     * Adds helper to the object.\r\n     * If visible is true it also adds object to the visible helpers container.\r\n     * \r\n     * Note: Visible object can be displayed as nested objects in the hierarchy tree \r\n     * instead of general helpers that are used only for displaying some additional information, \r\n     * for example camera icon in the viewport.\r\n     * \r\n     * @param {Object3D} obj \r\n     * @param {boolean} visible \r\n     */\r\n    addHelper(obj, visible) {\r\n        visible = visible === true;\r\n        this.helpers.addObject(obj);\r\n        if (visible) this.visibleHelpers.addObject(obj);\r\n    }\r\n\r\n    /**\r\n     * Removes given object from helpers container.\r\n     * \r\n     * @param {Object3D} obj \r\n     */\r\n    removeHelper(obj) {\r\n        this.helpers.removeObject(obj);\r\n        this.visibleHelpers.removeObject(obj);\r\n    }\r\n\r\n    /**\r\n     * Applies quaternion rotation.\r\n     * Euler angles will be updated automatically.\r\n     * \r\n     * @param {Quaternion} q \r\n     */\r\n    rotateByQuaternion(q) {\r\n        this._rotationQ.multiply(q);\r\n    }\r\n\r\n    /**\r\n     * Adds constraint to the 3D object.\r\n     * \r\n     * @param {Constraint} constraint \r\n     */\r\n    addConstraint(constraint) {\r\n        this.constraints.push(constraint);\r\n    }\r\n\r\n    /**\r\n     * Adds mesh to the 3D object.\r\n     * \r\n     * @param {Mesh}\r\n     */\r\n    addMesh(mesh) {\r\n        this.meshes[mesh.id] = mesh;\r\n    }\r\n\r\n    /**\r\n     * Removes mesh from the 3D object.\r\n     * \r\n     * @param {Mesh} mesh \r\n     */\r\n    removeMesh(mesh) {\r\n        delete this.meshes[mesh.id];\r\n    }\r\n\r\n    /**\r\n     * Creates translation matrix for the object.\r\n     * \r\n     * @return {Matrix4}\r\n     */\r\n    getTranslationMatrix() {\r\n        return Matrix4.createTranslation(this.position);\r\n    }\r\n\r\n    /**\r\n     * Creates rotation matrix for the object.\r\n     * \r\n     * @return {Matrix4}\r\n     */\r\n    getRotationMatrix() {\r\n        return Matrix4.createFromQuaternion(this._rotationQ);\r\n    }\r\n\r\n    /**\r\n     * Returns complete transformation matrix without applying constraints.\r\n     * \r\n     * @return {Matrix4}\r\n     */\r\n    getTransformationMatrix() {\r\n        let m = Matrix4.createTranslation(this.position);\r\n        m.multiply(Matrix4.createFromQuaternion(this._rotationQ));\r\n        return m;\r\n    }\r\n\r\n    /**\r\n     * Applies all constraints to the given matrix.\r\n     * \r\n     * @param {Matrix4} matrix \r\n     */\r\n    applyConstraints(matrix) {\r\n        for (let i = 0; i < this.constraints.length; i++) {\r\n            this.constraints[i].applyTransformations(matrix);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Renders all meshes and helpers.\r\n     * All objects except helpers inherit object transform.\r\n     * \r\n     * @param {WebGLRenderingContext} gl \r\n     * @param {Matrix4} transformMatrix \r\n     * @param {boolean} renderWire\r\n     */\r\n    render(gl, transformMatrix, viewport) {\r\n\r\n\r\n        // Compose transformation matrix.\r\n        let matrix = transformMatrix\r\n            .clone()\r\n            .multiply(this.getTransformationMatrix());\r\n\r\n        // Apply all constraints to this matrix.\r\n        this.applyConstraints(matrix);\r\n\r\n        // Render meshes of the objects.\r\n        for (let p in this.meshes) {\r\n            this.meshes[p].render(gl, matrix, viewport);\r\n        }\r\n\r\n        // Render helpers with initial transform matrix (without object transforms and constraints).\r\n        for (let p in this.helpers.objects) {\r\n            this.helpers.objects[p].render(gl, transformMatrix, viewport);\r\n        }\r\n    }\r\n}\r\n","import Vector from \"./Vector3\";\r\n\r\nexport default class Vertex {\r\n    constructor(x, y, z) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.z = z || 0;\r\n        this.normal = new Vector();\r\n    }\r\n\r\n    clone() {\r\n        return new Vertex(this.x, this.y, this.z);\r\n    }\r\n\r\n\r\n    /**\r\n     * Applies transformation matrix to the vertex.\r\n     * @param {Matrix} matrix\r\n     * @return {Vertex}\r\n     */\r\n    applyTransform(matrix) {\r\n        // TODO: Implement vertex transformation using matrix.\r\n    }\r\n}\r\n","import FramesLoop from \"./FramesLoop\";\r\nimport Log from \"../utils/Log\";\r\n\r\nexport default class Canvas\r\n{\r\n    // Creates canvas and prepare it.\r\n    constructor(container) {\r\n\r\n        if (container === undefined) {\r\n            Log.error('GLContext: container is not specified for the viewport.');\r\n            return false;\r\n        }\r\n\r\n        // Create fps indicator.\r\n        var div = document.createElement(\"div\");\r\n        div.style.position = 'relative';\r\n        div.style.width = '150px';\r\n        div.style.height = '150px';\r\n        div.style.marginLeft = '-150px';\r\n        div.style.marginTop = '-150px';\r\n        div.style.top = '150px';\r\n        div.style.left = '150px';\r\n        div.style.padding = '10px';\r\n        div.style.userSelect = 'none';\r\n        div.style.pointerEvents = 'none';\r\n        div.style.fontFamily = 'monospace';\r\n        div.style.fontSize = '12px';\r\n        div.style.color = '#333';\r\n        var textNode = document.createTextNode(\"\");\r\n        div.appendChild(textNode);\r\n        container.appendChild(div);\r\n\r\n\r\n        this.container = container;\r\n\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.style.display = 'block';\r\n        this.container.appendChild(this.canvas);\r\n        let gl = this.canvas.getContext('webgl', {antialias: false, premultipliedAlpha: false});\r\n        this.context = gl;\r\n\r\n        this.canvas.style.width = '100%';\r\n        this.canvas.style.maxWidth = '100%';\r\n        this.canvas.style.height = '100%';\r\n        this.canvas.style.maxHeight = '100%';\r\n\r\n        if (!gl) {\r\n            alert('WebGL is not available. Please enable it.');\r\n            return false;\r\n        }\r\n\r\n        this.loop = new FramesLoop(deltaTime => {\r\n            this.resizeCanvas();\r\n            textNode.textContent = 'FPS: ' + this.loop.getFPS();\r\n        });\r\n\r\n        // Handlers.\r\n        this.onRotate = null;\r\n        this.onZoom = null;\r\n        this.onMove = null;\r\n        this.onMouseDown = null;\r\n        this.onMouseUp = null;\r\n\r\n        let isMoving = false;\r\n        let isZooming = false;\r\n        let isRotating = false;\r\n\r\n        let preventContext = false;\r\n\r\n        let initialX = 0,\r\n            initialY = 0;\r\n\r\n        this.canvas.addEventListener('mousedown', event => {\r\n            isMoving = event.button === 0;\r\n            isZooming = event.button === 1;\r\n            isRotating = event.button === 2;\r\n\r\n            initialX = event.clientX;\r\n            initialY = event.clientY;\r\n\r\n            preventContext = true;\r\n\r\n            if (this.onMouseDown !== null) this.onMouseDown(initialX, initialY);\r\n        });\r\n\r\n        document.addEventListener('mouseup', event => {\r\n            isMoving = false;\r\n            isZooming = false;\r\n            isRotating = false;\r\n            if (this.onMouseUp !== null) this.onMouseUp(deltaX, deltaY);\r\n        });\r\n\r\n        document.addEventListener('mousemove', event => {\r\n            \r\n\r\n            let deltaX = initialX - event.clientX;\r\n            let deltaY = initialY - event.clientY;\r\n\r\n            if (isRotating) {\r\n                if (this.onRotate !== null) this.onRotate(deltaX, deltaY);\r\n            }\r\n            \r\n            if (isMoving) {\r\n                if (this.onMove !== null) this.onMove(deltaX, deltaY);\r\n            }\r\n        \r\n            \r\n            if (isZooming) {\r\n                if (this.onZoom !== null) this.onZoom(deltaX, deltaY);\r\n            }\r\n\r\n            initialX = event.clientX;\r\n            initialY = event.clientY;\r\n        });\r\n\r\n\r\n        document.addEventListener('contextmenu', event => {\r\n            if (preventContext) event.preventDefault();\r\n            preventContext = false;\r\n        });\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Returns rendering context.\r\n     * @return {WebGL2RenderingContext}\r\n     */\r\n    getContext() {\r\n        return this.context;\r\n    }\r\n\r\n    // Fits canvas buffer size to the canvas size.\r\n    resizeCanvas() {\r\n        let gl = this.context;\r\n        let width  = gl.canvas.clientWidth,\r\n            height = gl.canvas.clientHeight;\r\n\r\n        if (gl.canvas.width != width || gl.canvas.height != height) {\r\n            gl.canvas.width  = width;\r\n            gl.canvas.height = height;\r\n\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n    }\r\n}","export const RENDER_WIREFRAME = 1;\r\nexport const RENDER_SHADED = 2;\r\nexport const RENDER_SHADED_WIREFRAME = 3;\r\nexport const RENDER_FLAT = 4;\r\n\r\n\r\nexport const SHADER_TYPE_VERTEX = 1;\r\nexport const SHADER_TYPE_FRAGMENT = 2;","import Log from \"../utils/Log\";\r\nimport {SHADER_TYPE_VERTEX, SHADER_TYPE_FRAGMENT} from \"../core/constants\";\r\n\r\nconst TYPE_VEC3 = 'vec3';\r\nconst TYPE_VEC4 = 'vec4';\r\nconst TYPE_MAT3 = 'mat3';\r\nconst TYPE_MAT4 = 'mat4';\r\n\r\nexport default class Shader\r\n{\r\n    constructor(source, type) {\r\n        this.source = source;\r\n        this.type = type === SHADER_TYPE_VERTEX ? SHADER_TYPE_VERTEX : SHADER_TYPE_FRAGMENT;\r\n        this.shader = null;\r\n\r\n        this.attributes = {};\r\n        this.varyings = {};\r\n        this.uniforms = {};\r\n\r\n        this.parseSource();\r\n    }\r\n\r\n    getShader(gl) {\r\n        if (this.shader !== null) return this.shader;\r\n\r\n        // Compiles either a shader of type gl.VERTEX_SHADER or gl.FRAGMENT_SHADER\r\n        let shader = gl.createShader(this.type === SHADER_TYPE_VERTEX ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER);\r\n        gl.shaderSource(shader, this.source);\r\n        gl.compileShader(shader);\r\n\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            let info = gl.getShaderInfoLog(shader);\r\n            Log.error(\"Could not compile WebGL shader. \\n\\n\" + info);\r\n        }\r\n        this.shader = shader;\r\n        return shader;\r\n    }\r\n\r\n\r\n\r\n    prepareForRendering() {\r\n        for (let p in this.attributes) {\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    parseSource() {\r\n        let mainFuncPosition = this.source.search(/void\\s+main\\s*\\(\\)/i);\r\n\r\n        if (mainFuncPosition < 0) {\r\n            Log.error(\"Error on shader parsing: unable to find main function.\");\r\n        }\r\n\r\n        let lines = this.source.slice(0, mainFuncPosition).split(\"\\n\");\r\n\r\n        let isComment = false;\r\n        for (let i = 0; i < lines.length; i++) {\r\n            let line = lines[i].trim();\r\n\r\n            // Skip comments.\r\n            if (isComment) {\r\n                if (line.slice(-2) === '*/') {\r\n                    isComment = false;\r\n                }\r\n                continue;\r\n            }\r\n\r\n            if (line.slice(0, 2) === '//') continue;\r\n            if (line.slice(0, 2) === '/*') {\r\n                isComment = true;\r\n                continue;\r\n            }\r\n\r\n            // Skip empty lines.\r\n            if (line === '') continue;\r\n\r\n            let wordEndPos = line.indexOf(' ');\r\n            if (wordEndPos < 0) continue;\r\n            let v = line.slice(0, wordEndPos).split(' ');\r\n\r\n            if (v[0] === 'uniform') {\r\n                Object.defineProperty(this.uniforms, v[1], {\r\n                    value: 1\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nShader.TYPE_VERTEX = 1;\r\nShader.TYPE_FRAGMENT = 2;\r\n\r\n\r\n\r\n// Uniforms.\r\nShader.U_WIRE_COLOR     = 'u_wireColor';\r\nShader.U_DIFFUSE_COLOR  = 'u_diffuseColor';\r\nShader.U_SPECULAR_COLOR = 'u_specularColor';\r\nShader.U_LIGHT_COLOR    = 'u_lightColor';\r\nShader.U_RIM_COLOR      = 'u_rimColor';\r\n\r\nShader.U_VIEW_MATRIX    = 'u_viewMatrix';\r\nShader.U_PROj_MATRIX    = 'u_projMatrix';\r\nShader.U_LIGHT_VECTOR   = 'u_lightVector';\r\nShader.U_LIGHT_REV_DIR  = 'u_reverseLightDirection';\r\n\r\n\r\n\r\n// Attributes.\r\nShader.A_POSITION       = 'a_position';\r\nShader.A_NORMAL         = 'a_normal';","import EventsHub from \"../utils/EventsHub\";\r\n\r\nexport default class Color\r\n{\r\n    constructor(r, g, b, a) {\r\n        this._r = r || 0;\r\n        this._g = g || 0;\r\n        this._b = b || 0;\r\n        this._a = a || 1;\r\n\r\n        Object.defineProperty(this, 'r', {\r\n            get() {return this._r},\r\n            set(value) {\r\n                this._r = value;\r\n                this._eventsHub.trigger('change', this, this);\r\n            },\r\n            enumerable: true\r\n        });\r\n\r\n\r\n        Object.defineProperty(this, 'g', {\r\n            get() {return this._g},\r\n            set(value) {\r\n                this._g = value;\r\n                this._eventsHub.trigger('change', this, this);\r\n            },\r\n            enumerable: true\r\n        });\r\n\r\n\r\n        Object.defineProperty(this, 'b', {\r\n            get() {return this._b},\r\n            set(value) {\r\n                this._b = value;\r\n                this._eventsHub.trigger('change', this, this);\r\n            },\r\n            enumerable: true\r\n        });\r\n\r\n\r\n        Object.defineProperty(this, 'a', {\r\n            get() {return this._a},\r\n            set(value) {\r\n                this._a = value;\r\n                this._eventsHub.trigger('change', this, this);\r\n            },\r\n            enumerable: true\r\n        });\r\n\r\n        this._eventsHub = new EventsHub();\r\n\r\n        this._array = new Float32Array([this._r, this._g, this._b, this._a]);\r\n    }\r\n\r\n    /**\r\n     * Adds change event listener.\r\n     * \r\n     * @param {function} handler \r\n     * @param {number|string} channel Unique name of a handler.\r\n     * @see EventsHub\r\n     */\r\n    onChange(handler, channel) {\r\n        if (channel === undefined) {\r\n            this._eventsHub.on('change', handler);\r\n        } else {\r\n            this._eventsHub.getChannel(channel).on('change', handler);\r\n        }\r\n    }\r\n\r\n    copyValuesFrom(color) {\r\n        this._r = color.r;\r\n        this._g = color.g;\r\n        this._b = color.b;\r\n        this._a = color.a;\r\n        this._eventsHub.trigger('change', this, this);\r\n    }\r\n\r\n    asArray() {\r\n        this._array[0] = this._r;\r\n        this._array[1] = this._g;\r\n        this._array[2] = this._b;\r\n        this._array[3] = this._a;\r\n        return this._array;\r\n    }\r\n\r\n    setFromArray(a) {\r\n        this._r = a.length > 0 ? a[0] : this._r;\r\n        this._g = a.length > 1 ? a[1] : this._g;\r\n        this._b = a.length > 2 ? a[2] : this._b;\r\n        this._a = a.length > 3 ? a[3] : this._a;\r\n    }\r\n}\r\n\r\n\r\nColor.HELPERS = new Color(1, 0.75, 0.1, 1);","import Log from \"../utils/Log\";\r\nimport Shader from \"./Shader\";\r\nimport Color from \"../math/Color\";\r\n\r\nexport default class Material\r\n{\r\n    constructor(params) {\r\n        if (!params) params = {};\r\n\r\n        let shaders = [];\r\n        let program = null;\r\n        let isCompiled = false;\r\n        \r\n        this.wireColor = params.wireColor || new Color(0.7,0.7,0.7,0);\r\n\r\n        this.getProgram = function() {\r\n            return program;\r\n        };\r\n\r\n\r\n        this.addShader = function(shader) {\r\n            if ( !(shader instanceof Shader) )  {\r\n                Log.error(\"Given shader is not and instance of Shader class.\");\r\n            }\r\n            shaders.push(shader);\r\n            return this;\r\n        };\r\n\r\n\r\n        this.compileShaders = function (gl) {\r\n            if (!isCompiled) {\r\n                program = gl.createProgram();\r\n                for (let i = 0; i < shaders.length; i++) {\r\n                    gl.attachShader(program, shaders[i].getShader(gl));\r\n                }\r\n                gl.linkProgram(program);\r\n\r\n                if ( !gl.getProgramParameter( program, gl.LINK_STATUS) ) {\r\n                    let info = gl.getProgramInfoLog(program);\r\n                    throw 'Could not compile WebGL program. \\n\\n' + info;\r\n                }\r\n\r\n                isCompiled = true;\r\n            }\r\n            return this;\r\n        };\r\n\r\n\r\n        this.prepareShaders = function(gl) {\r\n            for (let i = 0; i < shaders.length; i++) {\r\n                shaders[i].prepareForRendering(gl);\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * This method must be overridden by the superclass.\r\n     */\r\n    prepareForRendering(gl) {\r\n\r\n    }\r\n}\r\n","import VertexShader from \"../core/VertexShader\";\r\n\r\nlet source = `\r\nattribute vec4 a_position;\r\nattribute vec3 a_normal;\r\n\r\nuniform mat4 u_matrix;\r\n\r\nvarying vec3 v_normal;\r\nvarying vec3 v_position;\r\n\r\nvoid main() {\r\n  // Multiply the position by the matrix.\r\n  gl_Position = u_matrix * a_position;\r\n  v_position = a_position.xyz;\r\n\r\n  // Pass the normal to the fragment shader\r\n  v_normal = a_normal;\r\n}\r\n`;\r\n\r\n\r\nlet defaultShader = new VertexShader(source);\r\nexport default defaultShader;\r\n","import Shader from \"./Shader\";\r\n\r\nimport {SHADER_TYPE_VERTEX} from \"../core/constants\";\r\n\r\nexport default class VertexShader extends Shader\r\n{\r\n    constructor(source) {\r\n        super(source, SHADER_TYPE_VERTEX);\r\n    }\r\n}","import FragmentShader from \"../core/FragmentShader\";\r\n\r\nlet source = `\r\nprecision mediump float;\r\n\r\n// Passed in from the vertex shader.\r\nvarying vec3 v_normal;\r\n\r\nuniform vec3 u_reverseLightDirection;\r\nuniform vec4 u_diffuseColor;\r\nuniform vec4 u_wireColor;\r\n\r\nvoid main() {\r\n  // because v_normal is a varying it's interpolated\r\n  // we it will not be a uint vector. Normalizing it\r\n  // will make it a unit vector again\r\n  vec3 normal = normalize(v_normal);\r\n\r\n  float light = dot(normal, u_reverseLightDirection);\r\n\r\n  gl_FragColor = u_diffuseColor;\r\n  \r\n\r\n  // Lets multiply just the color portion (not the alpha)\r\n  //  by the light\r\n  gl_FragColor.rgb *= light;\r\n\r\n  if (u_wireColor[3] > 0.0) {\r\n      gl_FragColor = u_wireColor;\r\n  }\r\n}\r\n`;\r\n\r\nlet shader = new FragmentShader(source);\r\n\r\nexport default shader;\r\n","import Shader from \"./Shader\";\r\n\r\nimport {SHADER_TYPE_FRAGMENT} from \"../core/constants\";\r\n\r\nexport default class FragmentShader extends Shader\r\n{\r\n    constructor(source) {\r\n        super(source, SHADER_TYPE_FRAGMENT);\r\n\r\n        let positionsLocation = null;\r\n        let positionAttributeName = 'a_positions';\r\n\r\n\r\n        this.setPositionsAttributeName = function(name) {\r\n            positionAttributeName = name;\r\n        }\r\n    }\r\n}","import Material from \"../core/Material\";\r\nimport defaultVertexShader from \"../shaders/defaultVertex\";\r\nimport defaultFragmentShader from \"../shaders/defaultFragment\";\r\nimport Color from \"../math/Color\";\r\nimport Shader from \"../core/Shader\";\r\n\r\nexport default class DefaultMaterial extends Material\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n        if (!params) params = {};\r\n\r\n        this.diffuseColor = params.color || new Color(0.5,0.5,0.5,1);\r\n\r\n        this.specular = 1;\r\n        this.glossiness = 0.5;\r\n\r\n        this.addShader(defaultVertexShader);\r\n        this.addShader(defaultFragmentShader);\r\n    }\r\n\r\n\r\n    prepareForRendering(gl) {\r\n        let program = this.getProgram();\r\n        let diffuseColorLoc = gl.getUniformLocation(program, Shader.U_DIFFUSE_COLOR);\r\n        let wireColorLoc = gl.getUniformLocation(program, Shader.U_WIRE_COLOR);\r\n\r\n        gl.uniform4fv(diffuseColorLoc, this.diffuseColor.asArray());\r\n        gl.uniform4fv(wireColorLoc, this.wireColor.asArray());\r\n    }\r\n}\r\n","import Vertex from \"../math/Vertex\";\r\nimport Vector3 from \"../math/Vector3\";\r\nimport Polygon from \"./Polygon\";\r\nimport GLContext from \"./Canvas\";\r\nimport DefaultMaterial from \"../materials/DefaultMaterial\";\r\nimport gtNextId from \"./IdGenerator\";\r\n\r\n\r\n/**\r\n * This class represents single mesh.\r\n * One object can contains few meshes and each can be rendered using specific\r\n * shader.\r\n * To reuse geometry information mesh can be a wrapper under another one.\r\n * Any transformation stored in the transformation matrix.\r\n */\r\nexport default class Mesh {\r\n    constructor(cachedMesh) {\r\n        this.id = gtNextId();\r\n\r\n        /**\r\n         * Array with all vertices.\r\n         * Each vertex contains 3 components that follows in the array\r\n         * one by one.\r\n         * @var {number[]}\r\n         * @see {Vertex}\r\n         * @see {getVertex}\r\n         */\r\n        this.vertices = [];\r\n\r\n        /**\r\n         * Array that stores textures coordinates.\r\n         * Each coordinate contains 3 components that follows in the array\r\n         * one by one.\r\n         * Must be read by 3.\r\n         * @var {number[]}\r\n         * @see {Vertex}\r\n         */\r\n        this.textureVertices = [];\r\n\r\n        /**\r\n         * Texture coordinates.\r\n         * @var {number{}}\r\n         */\r\n        this.uv = [];\r\n\r\n        /**\r\n         * Array with vertices normals.\r\n         * Each normal contains 3 components that follows in the array\r\n         * one by one.\r\n         * @var {number[]}\r\n         * @see {Vector3}\r\n         */\r\n        this.normals = [];\r\n\r\n        /**\r\n         * Array that stores all polygons.\r\n         * Polygon can contain 3 and more vertices.\r\n         * Each item of the array must be a Polygon instance.\r\n         * @var {Array[]}\r\n         * @see {getPolygon}\r\n         */\r\n        this.polygons = [];\r\n\r\n        /**\r\n         * Array with indexes of triangles.\r\n         * @var {number[]}\r\n         * @see {getFace}\r\n         */\r\n        this.facesIndices = [];\r\n\r\n        /**\r\n         * Array of indices for the wireframe rendering.\r\n         * @var {number[]}\r\n         */\r\n        this.wireframeIndices = [];\r\n\r\n        /**\r\n         * Material of the mesh.\r\n         * @var {Material}\r\n         */\r\n        this.material = new DefaultMaterial();\r\n\r\n        /**\r\n         * Stores link to the mesh that holds all geometry information.\r\n         * Used to prevent from keeping in memory a lot of clones.\r\n         * Any method that uses geometry information must use cached mesh\r\n         * first instead of internal properties.\r\n         * @var {Mesh}\r\n         */\r\n        this.cachedMesh = cachedMesh || null;\r\n\r\n        /**\r\n         * Translation vector for the geometry.\r\n         * Should be used for calculating real vertices positions.\r\n         * Any methods that works with geometry sould use cached geometry\r\n         * but must use self transformations.\r\n         * @var {Vector3}\r\n         */\r\n        this.position = new Vector3();\r\n\r\n        /**\r\n         * Rotation vector.\r\n         * Note that rotation will be processed using quaternion\r\n         * but rotation setting may be set using euler angles.\r\n         * @type {Vector3}\r\n         */\r\n        this.rotation = new Vector3();\r\n\r\n        /**\r\n         * Data buffers.\r\n         * @type {null}\r\n         */\r\n        this.verticesBuffer = null;\r\n        this.normalsBuffer = null;  \r\n        this.indicesBuffer = null;\r\n        this.wireBuffer = null;\r\n\r\n        this.updateBuffers = true;\r\n    }\r\n\r\n\r\n    /**\r\n     * Returns vertex with given index.\r\n     * IMPORTANT: Counting begins from 0.\r\n     * @return Vertex\r\n     */\r\n    getVertex(index, transformMatrix) {\r\n        if (transformMatrix === undefined) {\r\n            transformMatrix = this.transformMatrix;\r\n        }\r\n        // Call method on cached mesh if it exists.\r\n        if (this.cachedMesh !== null) {\r\n            return this.cachedMesh.getVertex(index, transformMatrix);\r\n        }\r\n\r\n        let startIndex = 0;\r\n        if (this.vertices.length > index * 3 + 4) {\r\n            startIndex = index * 3 + 1;\r\n        }\r\n        let vertex = new Vertex(\r\n            this.vertices[index],\r\n            this.vertices[index + 1],\r\n            this.vertices[index + 2]\r\n        );\r\n\r\n        return vertex.applyTransform(transformMatrix);\r\n    }\r\n\r\n    /**\r\n     * Returns polygon with given index.\r\n     * IMPORTANT: Counting begins from 0.\r\n     * @return {Polygon}\r\n     */\r\n    getPolygon(index) {\r\n\r\n    }\r\n\r\n\r\n    getFace(index) {\r\n\r\n    }\r\n\r\n\r\n    prepareForRendering(program, gl) {\r\n        // Create vertices buffer.\r\n        if (this.verticesBuffer === null) {\r\n            this.verticesBuffer = gl.createBuffer();\r\n        }\r\n        if (this.updateBuffers) {\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW); \r\n        }\r\n\r\n\r\n        // Create normals buffer.\r\n        if (this.normalsBuffer === null || this.updateBuffers) {\r\n            this.normalsBuffer = gl.createBuffer();\r\n        }\r\n        if (this.updateBuffers) {\r\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.normalsBuffer);\r\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.normalsBuffer), gl.STATIC_DRAW);\r\n        }\r\n    \r\n        \r\n        // Create buffer for faces indices.\r\n        if (this.indicesBuffer === null || this.updateBuffers) {\r\n            this.indicesBuffer = gl.createBuffer();\r\n        }\r\n        if (this.updateBuffers) {\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(this.facesIndices), gl.STATIC_DRAW);\r\n        }\r\n    \r\n\r\n        // Create buffer for wire indices.\r\n        if (this.wireBuffer === null || this.updateBuffers) {\r\n            this.wireBuffer = gl.createBuffer();\r\n        }\r\n        if (this.updateBuffers) {\r\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.wireBuffer);\r\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(this.wireframeIndices), gl.STATIC_DRAW);\r\n        }\r\n\r\n        this.updateBuffers = false;\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        let positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n        gl.enableVertexAttribArray(positionLocation);\r\n        gl.vertexAttribPointer(positionLocation, 3, gl.FLOAT, false, 0, 0);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.normalsBuffer);\r\n        var normalLocation = gl.getAttribLocation(program, \"a_normal\");\r\n        gl.enableVertexAttribArray(normalLocation);\r\n        gl.vertexAttribPointer(normalLocation, 3, gl.FLOAT, false, 0, 0);\r\n    }\r\n\r\n    makeFinalTransformMatrix(matrix, viewport) {\r\n        return matrix;\r\n    }\r\n\r\n    render(gl, transformMatrix, viewport) {\r\n        this.material.compileShaders(gl);\r\n        let program = this.material.getProgram();\r\n        gl.useProgram(program);\r\n\r\n        this.material.wireColor.a = 0;\r\n        this.material.prepareForRendering(gl);\r\n\r\n        this.prepareForRendering(program, gl);\r\n        let matrixLocation = gl.getUniformLocation(program, \"u_matrix\");\r\n\r\n        // Apply custom modifications to the transform matrix.\r\n        transformMatrix = this.makeFinalTransformMatrix(transformMatrix, viewport);\r\n\r\n        gl.uniformMatrix4fv(matrixLocation, false, transformMatrix.data);\r\n\r\n        this.draw(gl);\r\n\r\n        if (viewport.wireframe === true) {\r\n            this.material.wireColor.a = 1;\r\n            this.material.prepareForRendering(gl);\r\n            this.drawWire(gl);\r\n        }\r\n    }\r\n\r\n    draw(gl) {\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n        gl.drawElements(gl.TRIANGLES, this.facesIndices.length, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n\r\n\r\n    drawWire(gl) {\r\n        let cullFaceEnabled = gl.isEnabled(gl.CULL_FACE);\r\n        gl.disable(gl.CULL_FACE);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.wireBuffer);\r\n        gl.drawElements(gl.LINES, this.wireframeIndices.length, gl.UNSIGNED_SHORT, 0);\r\n        if (cullFaceEnabled) {\r\n            gl.enable(gl.CULL_FACE);\r\n        }\r\n    }\r\n}\r\n","import Mesh from \"./Mesh\";\r\n\r\n/**\r\n * Class that represents parametrizied mesh (like box, cylinder, cone, etc.).\r\n * User should extend this class and implement his own generation algorythm.\r\n */\r\nexport default class GeneratedMesh extends Mesh {\r\n    constructor(params) {\r\n        super();\r\n        params = params || {};\r\n        this.applyParameters(params);\r\n        this.generateMesh();\r\n    }\r\n\r\n    applyParameters(params) {\r\n        // This method will be impemented in the subclass.\r\n    }\r\n\r\n    generateMesh() {\r\n        // This method will be impemented in the subclass.\r\n    }\r\n}\r\n","import Shader from \"../core/Shader\";\r\nimport {SHADER_TYPE_FRAGMENT} from \"../core/constants\";\r\n\r\nlet source = `\r\nprecision mediump float;\r\n\r\nuniform vec4 u_diffuseColor;\r\n\r\nvoid main() {\r\n  gl_FragColor = u_diffuseColor;\r\n}\r\n`;\r\n\r\nlet defaultShader = new Shader(source, SHADER_TYPE_FRAGMENT);\r\nexport default defaultShader;\r\n","import Material from \"../core/Material\";\r\nimport flatFragment from \"../shaders/flatFragment\";\r\nimport defaultVertexShader from \"../shaders/defaultVertex\";\r\nimport Shader from \"../core/Shader\";\r\nimport Color from \"../math/Color\";\r\n\r\n\r\nexport default class FlatMaterial extends Material\r\n{\r\n    constructor(color) {\r\n        super();\r\n        this.addShader(defaultVertexShader);\r\n        this.addShader(flatFragment);\r\n        \r\n        if (color instanceof Color) {\r\n            this.color = color;\r\n        } else {\r\n            this.color = new Color(1, 1, 1, 1);\r\n            if (Array.isArray(color)) {\r\n                this.color.setFromArray(color);\r\n            }\r\n        }\r\n    }\r\n\r\n    prepareForRendering(gl) {\r\n        let program = this.getProgram();\r\n        \r\n        let colorLoc = gl.getUniformLocation(program, Shader.U_DIFFUSE_COLOR);\r\n        gl.uniform4fv(colorLoc, this.color.asArray());\r\n    }\r\n}\r\n","import GeneratedMesh from \"../core/GeneratedMesh\";\r\nimport FlatMaterial from \"../materials/FlatMaterial\";\r\n\r\n\r\nexport default class CameraMesh extends GeneratedMesh\r\n{\r\n    constructor() {\r\n        super();\r\n        this.material = new FlatMaterial([1,0.75,0.1,1]);\r\n    }\r\n\r\n    applyParameters(params) {\r\n        if (params === undefined) params = {};\r\n        this.size = params.size || 1;\r\n    }\r\n\r\n    generateMesh() {\r\n        let s = this.size;\r\n        let k = s/2;\r\n\r\n        this.vertices = [\r\n            0,  0,  0,\r\n           -s, -s,  -s,\r\n           -s,  s,  -s,\r\n           s,  s,   -s,\r\n           s, -s,   -s,\r\n           -s, -s,  -s,\r\n           0, s*1.35, -s,\r\n        ];\r\n\r\n        this.facesIndices = [\r\n            0, 1, 2, 0,\r\n            3, 2, 0,\r\n            4, 3, 0,\r\n            5, 4, 0,\r\n            2, 6, 3\r\n        ];\r\n    }\r\n\r\n    draw(gl) {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n        gl.drawElements(gl.LINE_STRIP, this.facesIndices.length, gl.UNSIGNED_SHORT, 0);\r\n        gl.drawElements(gl.TRIANGLE_STRIP, 3, gl.UNSIGNED_SHORT, 26);\r\n    }\r\n}","import GeneratedMesh from \"../core/GeneratedMesh\";\r\nimport FlatMaterial from \"../materials/FlatMaterial\";\r\n\r\n\r\nexport default class DummyMesh extends GeneratedMesh\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n        this.material = new FlatMaterial([1,0.75,0.1,1]);\r\n    }\r\n\r\n    applyParameters(params) {\r\n        if (params === undefined) params = {};\r\n        this.size = params.size || 10;\r\n    }\r\n\r\n    generateMesh() {\r\n        let s = this.size/2;\r\n\r\n        this.vertices = [\r\n            -s, -s, -s,\r\n             s, -s, -s,\r\n             s, -s, -s,\r\n             s,  s, -s,\r\n             s,  s, -s,\r\n            -s,  s, -s,\r\n            -s,  s, -s,\r\n            -s, -s, -s,\r\n            -s,  s, -s,\r\n            -s,  s,  s,\r\n            -s,  s,  s,\r\n            -s, -s,  s,\r\n            -s, -s,  s,\r\n            -s, -s, -s,\r\n            -s,  s,  s,\r\n             s,  s,  s,\r\n             s,  s,  s,\r\n             s, -s,  s,\r\n             s, -s,  s,\r\n            -s, -s,  s,\r\n             s,  s,  s,\r\n             s,  s, -s,\r\n             s, -s, -s,\r\n             s, -s,  s\r\n        ];\r\n    }\r\n\r\n    draw(gl) {\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        gl.drawArrays(gl.LINES, 0, this.vertices.length/3);\r\n    }\r\n}","import GeneratedMesh from \"../core/GeneratedMesh\";\r\nimport FlatMaterial from \"../materials/FlatMaterial\";\r\nimport Vector3 from \"../math/Vector3\";\r\nimport Color from \"../math/Color\";\r\n\r\n\r\nexport default class Line extends GeneratedMesh\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n\r\n        this.material = new FlatMaterial([1,0.75,0.1,1]);\r\n\r\n        this.start.onChange(() => this.generateMesh());\r\n        this.end.onChange(() => this.generateMesh());\r\n        this.color.onChange(c => this.material.color = c.asArray());\r\n    }\r\n\r\n    applyParameters(params) {\r\n        this.color = new Color(1, 0.75, 0.1, 1);\r\n        this.start = new Vector3();\r\n        this.end = new Vector3();\r\n\r\n        if (params !== undefined && params.color instanceof Color) {\r\n            this.color.copyValuesFrom(params.color);\r\n        }\r\n    }\r\n\r\n    generateMesh() {\r\n        this.vertices = [\r\n            this.start.x, this.start.y, this.start.z,\r\n            this.end.x,   this.end.y,   this.end.z\r\n        ];\r\n        this.updateBuffers = true;\r\n    }\r\n\r\n    draw(gl) {\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        gl.drawArrays(gl.LINES, 0, this.vertices.length/3);\r\n    }\r\n}","import Matrix4 from \"../math/Matrix4\";\r\nimport Vector3 from \"../math/Vector3\";\r\nimport CameraMesh from \"../meshes/CameraMesh\";\r\nimport Object3D from \"./Object3D\";\r\nimport DummyMesh from \"../meshes/DummyMesh\";\r\nimport Line from \"../meshes/Line\";\r\nimport Color from \"../math/Color\";\r\n\r\nexport default class Camera extends Object3D\r\n{\r\n    constructor(name) {\r\n        super(name);\r\n\r\n        this.position.x = 15;\r\n        this.position.y = 15;\r\n        this.position.z = 15;\r\n        \r\n        // Defines if camera is targeted.\r\n        this.targeted = false;\r\n\r\n        this.fieldOfView = 45;\r\n        this.near = 0.1;\r\n        this.far = 20000;\r\n        this.aspectRatio = 1;\r\n\r\n        // Creates line to display camera direction.\r\n        let lineObj = new Object3D();\r\n        let lineMesh = new Line({color: new Color(1, 0.75, 0.1, 1)});\r\n        lineObj.addMesh(lineMesh);\r\n        this.addHelper(lineObj, false);\r\n\r\n        // Create helper for camera.\r\n        let cameraObject = new Object3D('Camera');\r\n        let cameraMesh = new CameraMesh({size: 1});\r\n        cameraObject.addMesh(cameraMesh);\r\n        this.addHelper(cameraObject, false);\r\n\r\n\r\n        // Create helper for target.\r\n        this.target = new Object3D('Target');\r\n        let targetMesh = new DummyMesh({\r\n            size: 0.1\r\n        });\r\n        this.target.addMesh(targetMesh);\r\n        this.addHelper(this.target, true);\r\n        \r\n\r\n        // Change camera helper orientation on camera orientation change.\r\n        this.rotation.onChange(() => {\r\n            cameraObject._rotationQ.copyValuesFrom(this._rotationQ);\r\n        });\r\n\r\n        this.position.onChange(v => {\r\n            cameraObject.position.copyValuesFrom(v);\r\n            lineMesh.start.copyValuesFrom(v);\r\n\r\n            // Update camera transform depending on target position.\r\n            if (this.targeted) {\r\n                lookAtTarget.call(this);\r\n            }\r\n        });\r\n        this.position.x = this.position.x;\r\n \r\n        this.target.position.onChange(v => {\r\n            // Update line end position.\r\n            lineMesh.end.copyValuesFrom(v);\r\n\r\n            // Update camera transform depending on target position.\r\n            if (this.targeted) {\r\n                lookAtTarget.call(this);\r\n            }\r\n        });\r\n        this.target.x = this.target.x;\r\n\r\n        function lookAtTarget() {\r\n            let direction = this.position.clone().sub(this.target.position);\r\n            let lookAtMatrix= Matrix4.lookAt(direction);\r\n            this._rotationQ.setFromRotationMatrix(lookAtMatrix);\r\n        }\r\n\r\n        lookAtTarget.call(this);\r\n    }\r\n\r\n\r\n    getCameraMatrix() {\r\n        return Matrix4.createTranslation(this.position)\r\n                .multiply(Matrix4.createFromQuaternion(this._rotationQ));\r\n    }\r\n\r\n\r\n    getViewMatrix() {\r\n        return this.getCameraMatrix().clone().inverse();\r\n    }\r\n\r\n\r\n    getProjectionMatrix() {\r\n        return Matrix4.createPerspective(this.fieldOfView, this.near, this.far, this.aspectRatio);\r\n    }\r\n}\r\n","import Shader from \"../core/Shader\";\r\nimport {SHADER_TYPE_FRAGMENT} from \"../core/constants\";\r\n\r\nlet source = `\r\nprecision mediump float;\r\n\r\nuniform vec4 u_gridColor;\r\nuniform vec4 u_xColor;\r\nuniform vec4 u_yColor;\r\nuniform vec4 u_zColor;\r\n\r\nfloat len;\r\n\r\nvarying vec3 v_position;\r\n\r\nvoid main() {\r\n  len = sqrt(v_position.x*v_position.x + v_position.y*v_position.y + v_position.z*v_position.z);\r\n  \r\n  \r\n\r\n  gl_FragColor = u_gridColor;\r\n\r\n  if (v_position.x == 0.0 && v_position.z == 0.0) {\r\n    gl_FragColor = u_yColor;\r\n  }\r\n\r\n  if (v_position.y == 0.0 && v_position.z == 0.0) {\r\n    gl_FragColor = u_xColor;\r\n  }\r\n\r\n  if (v_position.x == 0.0 && v_position.y == 0.0) {\r\n    gl_FragColor = u_zColor;\r\n  }\r\n\r\n  if (len > 15.0) {\r\n    len = (1.0 - ((len - 15.0) / 10.0))/1.0 * gl_FragColor.a;\r\n    if (len < 0.0) {\r\n      len = 0.0;\r\n    }\r\n    gl_FragColor.a = len;\r\n  }\r\n}\r\n`;\r\n\r\nlet defaultShader = new Shader(source, SHADER_TYPE_FRAGMENT);\r\nexport default defaultShader;\r\n","import Material from \"../core/Material\";\r\nimport axisFragment from \"../shaders/axisFragment\";\r\nimport defaultVertexShader from \"../shaders/defaultVertex\";\r\nimport Color from \"../math/Color\";\r\n\r\n\r\nexport default class AxisMaterial extends Material\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n\r\n        this.addShader(defaultVertexShader);\r\n        this.addShader(axisFragment);\r\n\r\n        this.gridColor  = params.gridColor || new Color(0.22,0.25,0.28,1);\r\n        this.xAxisColor = new Float32Array([0.75, 0.15, 0, 1]);\r\n        this.yAxisColor = new Float32Array([0, 0.75, 0, 1]);\r\n        this.zAxisColor = new Float32Array([0, 0.25, 0.75, 1]);\r\n    }\r\n\r\n\r\n    prepareForRendering(gl) {\r\n        let program = this.getProgram();\r\n    \r\n        let gColorLoc = gl.getUniformLocation(program, \"u_gridColor\");\r\n        let xColorLoc = gl.getUniformLocation(program, \"u_xColor\");\r\n        let yColorLoc = gl.getUniformLocation(program, \"u_yColor\");\r\n        let zColorLoc = gl.getUniformLocation(program, \"u_zColor\");\r\n\r\n        gl.uniform4fv(gColorLoc, this.gridColor.asArray());\r\n        gl.uniform4fv(xColorLoc, this.xAxisColor);\r\n        gl.uniform4fv(yColorLoc, this.yAxisColor);\r\n        gl.uniform4fv(zColorLoc, this.zAxisColor);\r\n    }\r\n}\r\n","import GeneratedMesh from \"../core/GeneratedMesh\";\r\nimport AxisMaterial from \"../materials/AxisMaterial\";\r\nimport Color from \"../math/Color\";\r\n\r\nexport default class LinedPlane extends GeneratedMesh\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n        this.material = new AxisMaterial(params);\r\n    }\r\n\r\n\r\n    applyParameters(params) {\r\n        this.width  = params.width  || 50;\r\n        this.height = params.height || 50;\r\n        this.edgesX = params.edgesX || 50;\r\n        this.edgesY = params.edgesY || 50;\r\n    }\r\n\r\n\r\n    generateMesh() {\r\n        let vertices = [];\r\n        let polygons = [];\r\n        let indices = [];\r\n        let normals = [];\r\n\r\n        let stepX = Math.floor(this.width / this.edgesX);\r\n        let stepY = Math.floor(this.height / this.edgesY);\r\n\r\n        let halfW = this.width/2;\r\n        let halfH = this.height/2;\r\n\r\n        let j = 0;\r\n        for (let yi = 0; yi < this.edgesY + 1; yi++) {\r\n            vertices.push(-halfW, 0, yi * stepY - halfH);\r\n            vertices.push(halfW, 0, yi * stepY - halfH);\r\n            indices.push(j++, j++);\r\n        }\r\n        for (let xi = 0; xi < this.edgesX + 1; xi++) {\r\n            vertices.push(xi * stepX - halfW, 0, -halfH);\r\n            vertices.push(xi * stepX - halfW, 0, halfH);\r\n            indices.push(j++, j++);\r\n        }\r\n\r\n        this.vertices = vertices;\r\n        this.facesIndices = indices;\r\n    }\r\n    \r\n    draw(gl) {\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        gl.drawArrays(gl.LINES, 0, this.vertices.length/3);\r\n    }\r\n}\r\n","import GeneratedMesh from \"../core/GeneratedMesh\";\r\nimport AxisMaterial from \"../materials/AxisMaterial\";\r\n\r\nexport default class AxisGuides extends GeneratedMesh\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n        this.material = new AxisMaterial({color: [1, 1, 1, 1]});\r\n    }\r\n\r\n\r\n    applyParameters(params) {\r\n        this.size = params.size || 50;\r\n    }\r\n\r\n\r\n    generateMesh() {\r\n        let s = this.size/2;\r\n\r\n        this.vertices = [\r\n             s,  0,  0,\r\n            -s,  0,  0,\r\n             //0,  s,  0,\r\n             //0, -s,  0,\r\n             0,  0,  s,\r\n             0,  0, -s\r\n        ];\r\n        this.facesIndices = [\r\n            0, 1, 2, 3, 4, 5\r\n        ];\r\n    }\r\n\r\n    draw(gl) {\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        gl.drawArrays(gl.LINES, 0, this.vertices.length/3);\r\n    }\r\n}\r\n","import ObjectsContainer from \"./ObjectsContainer\";\r\nimport Object3D from \"./Object3D\";\r\nimport Vector3 from \"../math/Vector3\";\r\nimport Camera from \"./Camera\";\r\nimport LinedPlane from \"../meshes/LinedPlane\";\r\nimport AxisGuides from \"../meshes/AxisGuides\";\r\nimport getNextId from \"./IdGenerator\";\r\nimport Quaternion from \"../math/Quaternion\";\r\nimport Matrix4 from \"../math/Matrix4\";\r\nimport Color from \"../math/Color\";\r\n\r\nexport default class Viewport\r\n{\r\n    constructor(params) {\r\n        if (params === undefined) params = {};\r\n\r\n\r\n        this.id = getNextId();\r\n        this.name = params.name || 'Viewport ' + this.id;\r\n\r\n        this.x = params.x || 0;\r\n        this.y = params.y || 0;\r\n        this.width  = params.width  || Viewport.defaultWidth;\r\n        this.height = params.height || Viewport.defaultHeight;\r\n\r\n        this.flexible   = params.flexible !== false;\r\n        this.showGrid   = params.showGrid !== false;\r\n\r\n        this.background = params.background || Viewport.defaultBackground;\r\n        this.container  = params.container  || null;\r\n\r\n        // Containers that hold objects to render.\r\n        this.helpersContainer = new ObjectsContainer();\r\n\r\n        // Default camera that will be used for rendering by default.\r\n        // It's invisible in the scene.\r\n        this.defaultCamera = new Camera('viewport');\r\n\r\n        // Current camera. It can be replaced by another camera from the world.\r\n        this.camera = this.defaultCamera;\r\n        this.projectViewMatrix = null;\r\n\r\n        // Create grid mesh.\r\n        this.grid = new Object3D();\r\n        let gridMesh = new LinedPlane({\r\n            width: 50,\r\n            height: 50,\r\n            gridColor: new Color(0.5,0.5,0.5, 0.25)\r\n        });\r\n        this.grid.addMesh(gridMesh);\r\n\r\n        // Create axis guides.\r\n        this.axisGuides = new Object3D();\r\n        let guides = new AxisGuides({size: 50});\r\n        this.axisGuides.addMesh(guides);\r\n\r\n        this.showHelpers = true;\r\n        this.wireframe = true;\r\n        this.cullFace = true;\r\n\r\n        this.grow = params.grow === true;\r\n\r\n        this.background = params.background || null;\r\n        this.handleEvents = params.handleEvents === true;\r\n\r\n\r\n        this.rotate = (() => {\r\n            let up = new Vector3(0, 1, 0);\r\n            let fw = new Vector3(0, 0, 1);\r\n            let side = new Vector3(1, 0, 0);\r\n\r\n            let q1 = new Quaternion();\r\n            let q2 = new Quaternion();\r\n            let pos = new Vector3();\r\n\r\n            return (dX, dY) => {\r\n                if (this.handleEvents) {\r\n                    up.setValues(0, 1, 0);\r\n\r\n                    side.setValues(1,0,0);\r\n                    side.applyQuaternion(this.camera._rotationQ).normalize();\r\n                    \r\n                    q2.setFromAxisAngle(side, dY*0.005);\r\n                    q1.setFromAxisAngle(up, dX*0.005);\r\n\r\n                    pos.copyValuesFrom(this.camera.position)\r\n                        .sub(this.camera.target.position)\r\n                        .applyQuaternion(q2)\r\n                        .applyQuaternion(q1)\r\n                        .add(this.camera.target.position);\r\n\r\n                    this.camera.position.copyValuesFrom(pos);\r\n\r\n                    side.setValues(1,0,0);\r\n                    q2.setFromAxisAngle(side, dY*0.005);\r\n                    this.camera._rotationQ.multiply(q2);\r\n\r\n                    q1.multiply(this.camera._rotationQ);\r\n                    this.camera._rotationQ.copyValuesFrom(q1);\r\n                }\r\n            };\r\n        })();\r\n\r\n        this.onMouseDown = (dX, dY) => {\r\n\r\n        };\r\n    }\r\n\r\n    renderGrid(gl) {\r\n        this.grid.render(gl, this.projectViewMatrix, this);\r\n        this.axisGuides.render(gl, this.projectViewMatrix, this);\r\n    }\r\n\r\n\r\n    /**\r\n     * Renders given scene.\r\n     * @param {Scene} scene \r\n     * @param {WebGLRenderingContext} gl \r\n     */\r\n    renderScene(scene, gl) {\r\n        this.adjustSize(gl);\r\n\r\n        gl.enable(gl.DEPTH_TEST);\r\n        if (this.cullFace) {\r\n            gl.enable(gl.CULL_FACE);\r\n        }\r\n\r\n        gl.enable(gl.POLYGON_OFFSET_FILL);\r\n        gl.polygonOffset(2, 3);\r\n\r\n        this.projectViewMatrix = this.camera.getProjectionMatrix().multiply(this.camera.getViewMatrix());\r\n\r\n        if (this.showHelpers) {\r\n            this.renderGrid(gl);\r\n        }\r\n        for (let p in scene.layers) {\r\n            let objects = scene.layers[p].objects;\r\n            for (let id in objects) {\r\n                if (objects[id] === this.camera) continue;\r\n                objects[id].render(gl, this.projectViewMatrix, this);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    adjustSize(gl) {\r\n        let canvas = gl.canvas;\r\n        let displayWidth  = canvas.clientWidth;\r\n        let displayHeight = canvas.clientHeight;\r\n\r\n        if (this.grow) {\r\n            this.width = displayWidth;\r\n            this.height = displayHeight;\r\n        }\r\n\r\n        var aspect = this.width / this.height;\r\n        this.camera.aspectRatio = aspect;\r\n\r\n        if (canvas.width !== displayWidth || canvas.height !== displayHeight) {\r\n            canvas.width  = displayWidth;\r\n            canvas.height = displayHeight;\r\n        }\r\n\r\n        // Tell WebGL how to convert from clip space to pixels\r\n        gl.viewport(this.x, this.y, this.width, this.height);\r\n        gl.scissor(this.x, this.y, this.width, this.height);\r\n        if (this.background !== null) {\r\n            gl.clearColor(this.background.r, this.background.g, this.background.b, this.background.a);\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        }\r\n    }\r\n\r\n    zoom(dX, dY) {\r\n        if (this.handleEvents) {\r\n            let dir = this.camera.position\r\n                .clone()\r\n                .sub(this.camera.target.position);\r\n\r\n            dir.multiply(-dY*0.005);\r\n\r\n            let dist = dir.magnitude();\r\n            if (dist < 0.01 && dist !== 0) {\r\n                dir.normalize().multiply(0.01);\r\n                dist = 0.01;\r\n            }\r\n\r\n            this.camera.position.add(dir);\r\n\r\n            dist = dir.clone().copyValuesFrom(this.camera.position)\r\n                .sub(this.camera.target.position)\r\n                .magnitude();\r\n\r\n            if (dist < 0.01) {\r\n                this.camera.target.position.add(dir);\r\n            }\r\n        }\r\n    }\r\n\r\n    move(dX, dY) {\r\n        if (this.handleEvents) {\r\n            let side = new Vector3(1,0,0);\r\n            let up = new Vector3(0,1,0);\r\n\r\n            let dist = side.copyValuesFrom(this.camera.position)\r\n                .sub(this.camera.target.position)\r\n                .magnitude();\r\n\r\n            let k = dist/10;\r\n            if (k < 0.25) k = 0.25;\r\n     \r\n            side.setValues(1,0,0);\r\n\r\n            side.applyQuaternion(this.camera._rotationQ).multiply(dX*0.01*k);\r\n            up.applyQuaternion(this.camera._rotationQ).multiply(-dY*0.01*k);\r\n\r\n            \r\n\r\n            this.camera.position.add(side);\r\n            this.camera.position.add(up);\r\n\r\n            this.camera.target.position.add(side);\r\n            this.camera.target.position.add(up);\r\n        }\r\n    }\r\n}\r\n\r\n// Some default values.\r\nViewport.defaultWidth = 400;\r\nViewport.defaultHeight = 300;\r\nViewport.defaultBackground = '#fff';\r\n// Viewport.defaultBackground = '#f3f3f3';\r\n\r\n// Rendering modes.\r\nViewport.MODE_FLAT      = 1;\r\nViewport.MODE_SHADED    = 2;\r\nViewport.MODE_REALISTIC = 3;\r\n","import ObjectsContainer from \"./ObjectsContainer\";\r\n\r\n\r\nexport default class Layer extends ObjectsContainer\r\n{\r\n    constructor(name) {\r\n        super(name);\r\n\r\n\r\n    }\r\n}\r\n","import Layer from \"./Layer\";\r\n\r\n/**\r\n * Class represents single scene.\r\n * The scene is a kid of container that holds all objects to be rendered.\r\n * Also it contains necessary settings\r\n * Use scenes for implementing stages of a game for example.\r\n */\r\nexport default class Scene\r\n{\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.layers = {};\r\n        this.layersByName = {};\r\n        this.currentLayer = new Layer('Default layer');\r\n        this.addLayer(this.currentLayer);\r\n    }\r\n\r\n    addLayer(layer) {\r\n        this.layers[layer.id] = layer;\r\n        this.layersByName[layer.name] = layer;\r\n    }\r\n\r\n\r\n    /**\r\n     * Adds object into the given layer.\r\n     * If layer is not defined object will be added to the first.\r\n     * @param {Object3D} obj \r\n     */\r\n    addObject(obj, layerName) {\r\n        if (layerName === undefined) layerName = 'default';\r\n        let layer = this.getLayer(layerName);\r\n        if (layer === null) {\r\n            let k = Object.keys(this.layers);\r\n            if (k.length === 0) return false;\r\n            layer = this.layers[k[0]]\r\n        }\r\n    \r\n        layer.addObject(obj);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Returns layer with given ID.\r\n     * If layer is absent null will be returned.\r\n     * \r\n     * @param {number} id \r\n     * @return {Layer|null}\r\n     */\r\n    getLayer(id) {\r\n        if (this.layers.hasOwnProperty(id)) {\r\n            return this.layers[id];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Returns layer with given name.\r\n     * If layer is absent null will be returned.\r\n     * \r\n     * @param {string} name\r\n     * @return {Layer|null} \r\n     */\r\n    getLayerByName(name) {\r\n        if (this.layersByName.hasOwnProperty(name)) {\r\n            return this.layersByName[name];\r\n        }\r\n        return null;\r\n    }\r\n}","/**\r\n * Base class for files parsers.\r\n * All that you need is to implement parse method.\r\n */\r\nexport default class ObjParser\r\n{\r\n    constructor(file) {\r\n        this.file = file;\r\n    }\r\n\r\n    /**\r\n     * @return {Promise}\r\n     */\r\n    readFile() {\r\n        return new Promise((resolve, reject) => {\r\n            let reader = new FileReader();\r\n\r\n            reader.onload = () => {\r\n                let base64Index = reader.result.indexOf(';base64,');\r\n                if (base64Index >= 0) {\r\n                    return resolve(this.parse(atob(reader.result.slice(base64Index + 8))));\r\n                }\r\n                resolve(this.parse(reader.result));\r\n            };\r\n\r\n            reader.onerror = reject;\r\n            reader.readAsDataURL(this.file);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {Object|null} content \r\n     */\r\n    parse(content) {\r\n        // Implement parsing in the subclasses.\r\n        return null;\r\n    }\r\n}","import FileParser from \"./FileParser\";\r\nimport Mesh from \"../core/Mesh\";\r\n\r\nexport default class ObjParser extends FileParser\r\n{\r\n    constructor(file) {\r\n        super(file);\r\n    }\r\n\r\n\r\n    parse(content) {\r\n        let mesh = new Mesh();\r\n        \r\n        let lines = content.split(\"\\n\");\r\n        \r\n        for (let i = 0, len = lines.length; i < len; i++) {\r\n            let line = lines[i].trim();\r\n            \r\n            // Skip comments.\r\n            if (line[0] === '#') continue;\r\n\r\n            let arr = line.split(' '),\r\n                command = arr.shift();\r\n\r\n            // Parse vertices.    \r\n            if (command === 'v') {\r\n                for (let j = 0; j < arr.length; j++) {\r\n                    mesh.vertices.push(parseFloat(arr[j]));\r\n                }\r\n\r\n            // Parse faces (indices).    \r\n            } else if (command === 'f') {\r\n\r\n                let face = [],\r\n                    normal = [],\r\n                    tex = [];\r\n\r\n                let p = true;\r\n                for (let j = 0; j < arr.length; j++) {\r\n\r\n                    let indices = arr[j].split('/');\r\n                    face.push(parseInt(indices[0])-1);\r\n\r\n                    if (j > 2) {\r\n                        mesh.facesIndices.push(face[j-1]);\r\n                        mesh.facesIndices.push(face[j]);\r\n                        mesh.facesIndices.push(face[0]);\r\n                    } else {\r\n                        mesh.facesIndices.push(face[j]);\r\n                    }\r\n\r\n                    // Add indices by two.\r\n                    \r\n\r\n                    if (j > 1) {\r\n                        mesh.wireframeIndices.push(face[j-1]);\r\n                        mesh.wireframeIndices.push(face[j]);\r\n\r\n                        if (j === arr.length - 1) {\r\n                            mesh.wireframeIndices.push(face[j]);\r\n                            mesh.wireframeIndices.push(face[0]);\r\n                        }\r\n                    } else {\r\n                        mesh.wireframeIndices.push(face[j]);\r\n                    }\r\n                    p = !p;\r\n                }\r\n\r\n            // Set mesh name.    \r\n            } else if (command === 'o') {\r\n                mesh.name = arr[0];\r\n            }\r\n        }\r\n\r\n        return mesh;\r\n    }\r\n}","export default class Shadow\r\n{\r\n    constructor() {\r\n        this.opacity = 1;\r\n        this.bias = 1;\r\n        this.samples = 10;\r\n    }\r\n}","import Object3D from \"../core/Object3D\";\r\nimport Shadow from \"./Shadow\";\r\nimport Vector3 from \"../math/Vector3\";\r\n\r\n\r\nexport default class Light extends Object3D\r\n{\r\n    constructor() {\r\n        super();\r\n\r\n        this.intensity = 10;\r\n        this.shadow = new Shadow();\r\n        this.color = new Vector3(1, 1, 1);\r\n    }\r\n}","import GeneratedMesh from \"../core/GeneratedMesh\";\r\nimport FlatMaterial from \"../materials/FlatMaterial\";\r\nimport Color from \"../math/Color\";\r\nimport Matrix4 from \"../math/Matrix4\";\r\nimport Vector3 from \"../math/Vector3\";\r\n\r\nexport default class PointLightMesh extends GeneratedMesh\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n        this.name = params.name || 'Point light mesh';\r\n        if (params === undefined) params = {};\r\n        if (!params.color) params.color = Color.HELPERS;\r\n        this.material = new FlatMaterial(params.color);\r\n\r\n        this.matrix = new Matrix4();\r\n        this.up = new Vector3(0, 1, 0);\r\n        this.xAxis = new Vector3();\r\n        this.yAxis = new Vector3();\r\n        this.zAxis = new Vector3();\r\n        this.lookAtMatrix = new Matrix4();\r\n    }\r\n\r\n\r\n    applyParameters(params) {\r\n        if (params === undefined) params = {};\r\n        this.size = params.size || 2;\r\n        this.interpolation = params.interpolation || 10;\r\n        this.secondCircleOffset = 0;\r\n    }\r\n\r\n\r\n    generateMesh() {\r\n        this.vertices = [];\r\n\r\n        let step = 2/(this.interpolation - 1);\r\n        let r = this.size/2;\r\n        let PI2 = 2 * Math.PI;\r\n\r\n        let j = 0;\r\n        for (let i = 0; i <= PI2; i += step) {\r\n            this.vertices.push(r*Math.sin(i), r*Math.cos(i), 0);\r\n            if (j > 0) {\r\n                this.facesIndices.push(j-1, j);\r\n            }\r\n            j++;\r\n        }\r\n\r\n        this.secondCircleOffset = this.vertices.length;\r\n\r\n        r = this.size/2.5;\r\n        j = 0;\r\n        for (let i = 0; i <= PI2; i += step) {\r\n            this.vertices.push(r*Math.sin(i), r*Math.cos(i), 0);\r\n            if (j > 0) {\r\n                this.facesIndices.push(j-1, j);\r\n            }\r\n            j++;\r\n        }\r\n    }\r\n\r\n\r\n    makeFinalTransformMatrix(matrix, viewport) {\r\n        this.matrix.copyValuesFrom(matrix);\r\n\r\n        \r\n        this.zAxis.setValues(matrix.data[12], matrix.data[13], matrix.data[14])\r\n            .sub(viewport.camera.position).normalize();\r\n\r\n\r\n        this.lookAtMatrix = Matrix4.createFromQuaternion(viewport.camera._rotationQ);\r\n        \r\n        return this.matrix.multiply(this.lookAtMatrix);\r\n    }\r\n\r\n    draw(gl) {\r\n        let cullFaceEnabled = gl.isEnabled(gl.CULL_FACE);\r\n        gl.disable(gl.CULL_FACE);\r\n\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);\r\n        gl.drawArrays(gl.LINE_LOOP, 0, this.secondCircleOffset/3);\r\n        gl.drawArrays(gl.TRIANGLE_FAN, this.secondCircleOffset/3, (this.vertices.length - this.secondCircleOffset)/3);\r\n\r\n        if (cullFaceEnabled) {\r\n            gl.enable(gl.CULL_FACE);\r\n        }\r\n    }\r\n}\r\n","import App from \"./core/App\";\nimport Vector3 from \"./math/Vector3\";\nimport FramesLoop from \"./core/FramesLoop\";\nimport Viewport from \"./core/Viewport\";\nimport Object3D from \"./core/Object3D\";\nimport Cube from \"./meshes/Cube\";\nimport Plane from \"./meshes/Plane\";\nimport Quaternion from \"./math/Quaternion\";\nimport Camera from \"./core/Camera\";\nimport Color from \"./math/Color\";\nimport ObjParser from \"./file-parsers/ObjParser\";\nimport Log from \"./utils/Log\";\nimport PointLight from \"./lights/PointLight\";\n\nwindow.NAT = {\n    App: App,\n    Viewport: Viewport,\n    Object3D: Object3D,\n    Vector3: Vector3,\n    Quaternion: Quaternion,\n    FramesLoop: FramesLoop,\n    Camera: Camera,\n    Color: Color,\n\n    // Standard meshes.\n    meshes: {\n        Cube: Cube,\n        Plane: Plane\n    },\n\n    lights: {\n        PointLight: PointLight,\n        DirectLight: null,\n        SpotLight: null\n    },\n\n    readFile(file) {\n        let ext = file.name.split('.').pop().toLowerCase();\n\n        let parser = null;\n\n        switch (ext) {\n            case 'obj':\n                parser = new ObjParser(file);\n                break;\n        }\n\n        if (parser === null) {\n            Log.error('Unsupported file extension (' + ext + ')');\n        } else {\n            return parser.readFile();\n        }\n    }\n};\n","import Viewport from \"./Viewport\";\r\nimport Canvas from \"./Canvas\";\r\nimport Scene from \"./Scene\";\r\nimport Log from \"../utils/Log\";\r\nimport FramesLoop from \"./FramesLoop\";\r\nimport Camera from \"./Camera\";\r\nimport Cube from \"../meshes/Cube\";\r\nimport Object3D from \"./Object3D\";\r\nimport Quaternion from \"../math/Quaternion\";\r\nimport Vector3 from \"../math/Vector3\";\r\nimport Color from \"../math/Color\";\r\n\r\nexport default class App {\r\n\r\n    constructor() {\r\n        this.viewports = {};\r\n        this.viewportByName = {};\r\n        this.scenes = {};\r\n        this.canvas = null;\r\n\r\n        this.currentScene = null;\r\n        this.stopped = false;\r\n\r\n        this.loop = new FramesLoop(deltaTime => {\r\n            if (this.stopped || this.currentScene === null) return;\r\n\r\n            // Clear the canvas.\r\n            let gl = this.canvas.context;\r\n            gl.enable(gl.SCISSOR_TEST);\r\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n            for (let v in this.viewports) {\r\n                this.viewports[v].renderScene(this.currentScene, gl);\r\n            }\r\n        });\r\n    }\r\n\r\n    addViewport(viewport) {\r\n        this.viewports[viewport.id] = viewport;\r\n        this.viewportByName[viewport.name] = viewport;\r\n    }\r\n\r\n    getViewport(viewport) {\r\n        \r\n    }\r\n\r\n    /**\r\n     * Initializes application in the given container.\r\n     * @param {Node} container \r\n     */\r\n    init(container) {\r\n        if (this.canvas !== null) return;\r\n\r\n        this.canvas = new Canvas(container);\r\n        let viewport = new Viewport({\r\n            name: 'Default',\r\n            x: 0,\r\n            y: 0,\r\n            width: 400,\r\n            height: 200,\r\n            grow: true,\r\n            handleEvents: true\r\n        });\r\n        this.addViewport(viewport);\r\n\r\n        this.currentScene = this.createScene('default');\r\n\r\n        // Trigger rotation.\r\n        this.canvas.onMouseDown = (dX, dY) => {\r\n            for (let p in this.viewports) {\r\n                this.viewports[p].onMouseDown(dX, dY);\r\n            }\r\n        };\r\n\r\n        // Trigger rotation.\r\n        this.canvas.onRotate = (dX, dY) => {\r\n            for (let p in this.viewports) {\r\n                this.viewports[p].rotate(dX, dY);\r\n            }\r\n        };\r\n\r\n        // Trigger zoom.\r\n        this.canvas.onZoom = (dX, dY) => {\r\n            for (let p in this.viewports) {\r\n                this.viewports[p].zoom(dX, dY);\r\n            }\r\n        };\r\n\r\n        // Trigger zoom.\r\n        this.canvas.onMove = (dX, dY) => {\r\n            for (let p in this.viewports) {\r\n                this.viewports[p].move(dX, dY);\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Returns WebGL context.\r\n     * @return {GLContext}\r\n     */\r\n    getContext() {\r\n        return this.canvas.context;\r\n    }\r\n\r\n    /**\r\n     * Creates new scene with given name.\r\n     * @param {string} name \r\n     */\r\n    createScene(name) {\r\n        if (this.scenes.hasOwnProperty(name)) {\r\n            Log.warn('App: scene with name \"' + name + '\" already exists.');\r\n            return null;\r\n        }\r\n        let scene = new Scene(name);\r\n        this.scenes[name] = scene;\r\n        if (this.currentScene === null) {\r\n            this.currentScene = scene;\r\n        }\r\n        return scene;\r\n    }\r\n\r\n    /**\r\n     * Activates scene with given name.\r\n     * Returns true if scene was successfully activated.\r\n     * @param {string} name \r\n     * @return {boolean}\r\n     */\r\n    activateScene(name) {\r\n        if (this.scenes.hasOwnProperty(name)) {\r\n            this.currentScene = this.scenes[name];\r\n            return true;\r\n        }\r\n        Log.warn('App: scene with name \"' + name + '\" is absent.');\r\n        return false;\r\n    }\r\n}\r\n","import GeneratedMesh from \"../core/GeneratedMesh\";\r\nimport FlatMaterial from \"../materials/FlatMaterial\";\r\n\r\nexport default class Cube extends GeneratedMesh\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n\r\n        this.material = new FlatMaterial([1,0,1,1]);\r\n    }\r\n\r\n\r\n    applyParameters(params) {\r\n        this.size = params.size || 100;\r\n    }\r\n\r\n    /**\r\n     * Overrides mesh generation method.\r\n     */\r\n    generateMesh() {\r\n        let s = this.size/2 || 0.5;\r\n\r\n        let cornerVertices = [\r\n            [-s, -s, -s],\r\n            [+s, -s, -s],\r\n            [-s, +s, -s],\r\n            [+s, +s, -s],\r\n            [-s, -s, +s],\r\n            [+s, -s, +s],\r\n            [-s, +s, +s],\r\n            [+s, +s, +s],\r\n        ];\r\n\r\n        let faceNormals = [\r\n            [+1, +0, +0],\r\n            [-1, +0, +0],\r\n            [+0, +1, +0],\r\n            [+0, -1, +0],\r\n            [+0, +0, +1],\r\n            [+0, +0, -1],\r\n        ];\r\n\r\n        let uvCoords = [\r\n            [1, 0],\r\n            [0, 0],\r\n            [0, 1],\r\n            [1, 1],\r\n        ];\r\n\r\n        this.polygons = [\r\n            [3, 7, 5, 1], // right\r\n            [6, 2, 0, 4], // left\r\n            [6, 7, 3, 2], // top\r\n            [0, 1, 5, 4], // bottom\r\n            [7, 6, 4, 5], // front\r\n            [2, 3, 1, 0]  // back\r\n        ];\r\n\r\n        let normals = [];\r\n        let positions = [];\r\n        let texCoords = [];\r\n        let indices = [];\r\n\r\n        for (let f = 0; f < 6; f++) {\r\n            const faceIndices = this.polygons[f];\r\n            for (let v = 0; v < 4; v++) {\r\n              const position = cornerVertices[faceIndices[v]];\r\n              const normal = faceNormals[f];\r\n              const uv = uvCoords[v];\r\n      \r\n                // Each face needs all four vertices because the normals and texture\r\n                // coordinates are not all the same.\r\n                positions.push(...position);\r\n                normals.push(...normal);\r\n                texCoords.push(...uv);\r\n            \r\n            }\r\n            // Two triangles make a square face.\r\n            const offset = 4 * f;\r\n            indices.push(offset + 0, offset + 1, offset + 2);\r\n            indices.push(offset + 0, offset + 2, offset + 3);\r\n          }\r\n\r\n\r\n        this.vertices = positions;\r\n        this.facesIndices = indices;\r\n        this.normals = normals;\r\n        this.textureCoords = texCoords;\r\n    }\r\n\r\n    draw(gl) {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\r\n        gl.drawElements(gl.LINE_LOOPS, this.facesIndices.length, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n}\r\n","import Light from \"./Light\";\r\nimport Object3D from \"../core/Object3D\";\r\nimport PointLightMesh from \"../meshes/PointLightMesh\";\r\n\r\nexport default class PointLight extends Light\r\n{\r\n    constructor(params) {\r\n        super(params);\r\n\r\n        \r\n        this.name = params.name || 'Point light';\r\n\r\n        // Create geometry for the light.\r\n        let lightObj = new Object3D();\r\n        let lightMesh = new PointLightMesh(params);\r\n        lightObj.addMesh(lightMesh);\r\n        this.helpers.addObject(lightObj);\r\n\r\n        // Move helper with light.\r\n        this.position.onChange(v => {\r\n            lightObj.position.copyValuesFrom(v);\r\n        });\r\n    }\r\n}"],"names":["Math","abs","sin","cos","PI","sqrt","idCounter","clamp","value","min","max","radToDeg","radians","RAD2DEG","loop","now","performance","deltaTime","lastFrameTime","i","handlers","length","p","namedHandlers","hasOwnProperty","framesRendered","lastSecondTime","fps","requestAnimationFrame","createPolygon","x","y","width","height","k","vertices","indices","polygon","normals","textCoords","ObjectsContainer","constructor","name","id","getNextId","objects","seeThrough","addObject","obj","removeObject","EventsHub","getChannel","on","eventName","handler","push","trigger","context","args","call","h","Vector3","z","_x","_y","_z","_eventsHub","onChange","channel","setValues","copyValuesFrom","vector","magnitude","squaredMagnitude","normalize","len","multiply","cross","v","n","clone","dot","add","sub","invert","applyQuaternion","q","qx","qy","qz","qw","w","ix","iy","iz","iw","toArray","prototype","isVector3","Object","defineProperty","get","set","enumerable","Log","prefix","error","msg","console","log","info","warn","_lut","toString","Matrix","data","Array","isArray","_up","zero","one","Matrix4","m","a","b","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","inverse","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","d","compose","position","quaternion","scale","te","_w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","createTranslation","dx","dy","dz","createXRotation","angleInRadians","c","s","createYRotation","createZRotation","createScaling","createProjection","depth","createPerspective","FOVInRadians","near","far","aspect","tan","f","rangeInv","lookAt","direction","up","zAxis","xAxis","yAxis","createRotationAxis","axis","angle","t","tx","ty","matrix","createFromQuaternion","Euler","order","_order","toUpperCase","inDegrees","setFromRotationMatrix","update","atan2","asin","setFromQuaternion","reorder","isEuler","Quaternion","setFromEuler","euler","fireEvents","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","trace","setFromUnitVectors","from","to","r","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","isQuaternion","Object3D","meshes","rotation","_rotationQ","e","constraints","helpers","visibleHelpers","addHelper","visible","removeHelper","rotateByQuaternion","addConstraint","constraint","addMesh","mesh","removeMesh","getTranslationMatrix","getRotationMatrix","getTransformationMatrix","applyConstraints","applyTransformations","render","gl","transformMatrix","viewport","Vertex","normal","Vector","applyTransform","FramesLoop","start","stop","splice","getFPS","Canvas","container","div","document","createElement","style","marginLeft","marginTop","top","left","padding","userSelect","pointerEvents","fontFamily","fontSize","color","textNode","createTextNode","appendChild","canvas","display","getContext","antialias","premultipliedAlpha","maxWidth","maxHeight","alert","resizeCanvas","textContent","onRotate","onZoom","onMove","onMouseDown","onMouseUp","isMoving","isZooming","isRotating","preventContext","initialX","initialY","addEventListener","event","button","clientX","clientY","deltaX","deltaY","preventDefault","clientWidth","clientHeight","SHADER_TYPE_VERTEX","SHADER_TYPE_FRAGMENT","source","type","shader","attributes","varyings","uniforms","parseSource","getShader","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","prepareForRendering","mainFuncPosition","search","lines","slice","split","isComment","line","trim","wordEndPos","indexOf","Shader","TYPE_VERTEX","TYPE_FRAGMENT","U_WIRE_COLOR","U_DIFFUSE_COLOR","U_SPECULAR_COLOR","U_LIGHT_COLOR","U_RIM_COLOR","U_VIEW_MATRIX","U_PROj_MATRIX","U_LIGHT_VECTOR","U_LIGHT_REV_DIR","A_POSITION","A_NORMAL","g","_r","_g","_b","_a","_array","Float32Array","asArray","setFromArray","Color","HELPERS","params","shaders","program","isCompiled","wireColor","getProgram","addShader","compileShaders","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","prepareShaders","defaultShader","setPositionsAttributeName","DefaultMaterial","Material","diffuseColor","specular","glossiness","defaultVertexShader","defaultFragmentShader","diffuseColorLoc","getUniformLocation","wireColorLoc","uniform4fv","Mesh","cachedMesh","gtNextId","textureVertices","uv","polygons","facesIndices","wireframeIndices","material","verticesBuffer","normalsBuffer","indicesBuffer","wireBuffer","updateBuffers","getVertex","index","vertex","getPolygon","getFace","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","Uint16Array","positionLocation","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","normalLocation","makeFinalTransformMatrix","useProgram","matrixLocation","uniformMatrix4fv","draw","wireframe","drawWire","drawElements","TRIANGLES","UNSIGNED_SHORT","cullFaceEnabled","isEnabled","CULL_FACE","disable","LINES","enable","GeneratedMesh","applyParameters","generateMesh","FlatMaterial","flatFragment","colorLoc","CameraMesh","size","LINE_STRIP","TRIANGLE_STRIP","DummyMesh","drawArrays","Line","end","Camera","lookAtTarget","target","lookAtMatrix","targeted","fieldOfView","aspectRatio","lineObj","lineMesh","cameraObject","cameraMesh","targetMesh","getCameraMatrix","getViewMatrix","getProjectionMatrix","AxisMaterial","axisFragment","gridColor","xAxisColor","yAxisColor","zAxisColor","gColorLoc","xColorLoc","yColorLoc","zColorLoc","LinedPlane","edgesX","edgesY","floor","stepX","stepY","halfW","halfH","j","yi","xi","AxisGuides","Viewport","defaultWidth","defaultHeight","flexible","showGrid","background","defaultBackground","helpersContainer","defaultCamera","camera","projectViewMatrix","grid","gridMesh","axisGuides","guides","showHelpers","cullFace","grow","handleEvents","rotate","side","q1","q2","pos","dX","dY","renderGrid","renderScene","scene","adjustSize","DEPTH_TEST","POLYGON_OFFSET_FILL","polygonOffset","layers","displayWidth","displayHeight","scissor","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","zoom","dir","dist","move","MODE_FLAT","MODE_SHADED","MODE_REALISTIC","Layer","Scene","layersByName","currentLayer","addLayer","layer","layerName","getLayer","keys","getLayerByName","ObjParser","file","readFile","Promise","resolve","reject","reader","FileReader","onload","base64Index","result","parse","atob","onerror","readAsDataURL","FileParser","content","arr","command","shift","parseFloat","face","opacity","bias","intensity","shadow","interpolation","step","LINE_LOOP","secondCircleOffset","window","NAT","App","viewports","viewportByName","scenes","currentScene","stopped","SCISSOR_TEST","addViewport","getViewport","init","createScene","activateScene","Cube","cornerVertices","faceNormals","uvCoords","positions","texCoords","faceIndices","offset","textureCoords","LINE_LOOPS","y2i","PointLight","lightObj","DirectLight","parser"],"mappings":"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"}